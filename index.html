<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Delfín Check‑in · Software de gestión hotelera y auto check‑in</title>
  <meta name="description" content="Delfín Check‑in: software para hoteles y alojamientos con reservas, check‑in online, gestión de habitaciones y panel de administración sencillo. Plan mensual o anual.">
  <meta name="keywords" content="software hotel, channel manager, check-in online, PMS, reservas, gestión de hoteles, motor de reservas">
  <link rel="canonical" href="https://delfincheckin.com/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Delfín Check‑in · Software de gestión hotelera y auto check‑in">
  <meta property="og:description" content="Gestiona reservas, habitaciones y check‑ins desde una sola plataforma. Plan mensual o anual.">
  <meta property="og:image" content="https://delfincheckin.com/og-image.svg">
  <meta property="og:url" content="https://delfincheckin.com/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Delfín Check‑in · Software de gestión hotelera">
  <meta name="twitter:description" content="Reservas, check‑in online y gestión de habitaciones.">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🐬</text></svg>">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🐬</text></svg>">

  <style>
    :root{
      --bg: #0b1220;
      --card: #0f1629;
      --text: #e5ecff;
      --muted: #9fb0d1;
      --brand: #44c0ff;
      --accent: #7cf07c;
      --danger: #ff6b6b;
      --ring: rgba(68,192,255,0.35);
      --maxw: 1180px;
      --radius: 14px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--text); background: radial-gradient(1200px 800px at 70% -10%, rgba(68,192,255,.15), transparent), linear-gradient(180deg, #0b1220 0%, #0a1020 100%);
    }
    a{ color: var(--brand); text-decoration: none }
    .container{ max-width: var(--maxw); margin:0 auto; padding: 0 20px }

    /* Header */
    header{
      position: sticky; top:0; z-index:100; backdrop-filter: saturate(160%) blur(8px);
      background: rgba(11,18,32,.6); border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .nav{ display:flex; align-items:center; justify-content:space-between; gap:16px; padding:16px 0 }
    .brand{ display:flex; gap:12px; align-items:center }
    .logo{ font-size:32px; line-height:1; display:grid; place-items:center }
    .brand b{ font-weight:800; letter-spacing:.2px; font-size:22px }
    .actions{ display:flex; gap:10px; align-items:center }
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:8px; height:40px; padding:0 14px; border-radius:10px; border:1px solid rgba(255,255,255,.12); color:var(--text); background: rgba(255,255,255,.03) }
    .btn:hover{ border-color: rgba(255,255,255,.22); background: rgba(255,255,255,.06) }
    .btn.primary{ background: linear-gradient(135deg, var(--brand), #2bb3ff); border: none; color: #0a1020; font-weight:700; box-shadow: 0 6px 20px var(--ring) }
    .btn.primary:hover{ filter: brightness(1.05) }

    /* Hero */
    .hero{ padding: 56px 0 28px }
    .hero h1{ font-size: clamp(32px, 6vw, 52px); line-height: 1.05; margin: 0 0 14px }
    .hero p{ color: var(--muted); margin: 0 0 20px; font-size: clamp(16px, 2.2vw, 18px) }
    .badges{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:14px }
    .badge{ font-size:12px; color:#0a1020; background:#b5f1ff; padding:6px 10px; border-radius:999px; font-weight:700 }
    .hero-card{ background: var(--card); border:1px solid rgba(255,255,255,.06); border-radius: var(--radius); padding: 18px; box-shadow: var(--shadow) }
    .checklist{ display:grid; grid-template-columns: repeat(2, minmax(200px, 1fr)); gap:12px; margin-top:8px }
    .check{ display:flex; gap:10px; align-items:flex-start; color: var(--muted) }
    .check strong{ min-width: 200px; display: inline-block; }
    .check i{ color:#93fba3 }

    /* Social proof */
    .logos{ opacity:.95; display:flex; gap:22px; flex-wrap:wrap; align-items:flex-start; justify-content:center; padding: 18px 0 }
    .logos .logo-txt{ font-weight:800; color:#0f172a; letter-spacing:.2px }
    .brand-box{ display:flex; flex-direction:column; align-items:center; gap:8px }
    .brand-box .brand-name{ font-weight:800; color:#0f172a }
    .brand-box img{ height:40px; filter:none; opacity:1 }

    /* Pricing */
    .section{ padding: 32px 0 }
    .section h2{ font-size: clamp(26px, 4vw, 36px); margin:0 0 14px }
    .section p.lead{ color:var(--muted); margin:0 0 20px }
    .pricing{ display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:16px }
    .card{ background: var(--card); border:1px solid rgba(255,255,255,.06); border-radius: var(--radius); padding:16px; box-shadow: var(--shadow) }
    .card h3{ margin:0 0 6px }
    .price{ display:flex; align-items:baseline; gap:8px; margin: 10px 0 14px }
    .price strong{ font-size:34px }
    .price small{ color:var(--muted) }
    .features{ display:grid; gap:8px; color: var(--muted); margin: 10px 0 16px }
    .cta{ display:flex; gap:10px; flex-wrap:wrap }
    .note{ color:var(--muted); font-size:13px }

    /* KPIs dashboard */
    .kpis{ display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:18px; margin: 8px 0 18px }
    .kpi{ background: #ffffff; border:1px solid #e2e8f0; border-radius:14px; padding:16px; display:flex; align-items:center; gap:14px; box-shadow: 0 2px 8px rgba(0,0,0,0.1) }
    .kpi .ic{ width:42px; height:42px; display:grid; place-items:center; border-radius:12px; font-size:20px }
    .kpi .meta{ color:#64748b; font-weight:600 }
    .kpi .value{ font-size:24px; font-weight:800; color:#0f172a }

    /* FAQ */
    details{ background: var(--card); border:1px solid rgba(255,255,255,.06); border-radius:12px; padding:12px 16px }
    details+details{ margin-top:10px }
    summary{ cursor:pointer; font-weight:600 }
    summary::-webkit-details-marker{ display:none }

    /* Footer */
    footer{ color:var(--muted); border-top:1px solid rgba(255,255,255,.06); margin-top:32px; padding:14px 0 26px }

    /* Animaciones */
    .btn, .card, .kpi{ transition: all 0.3s ease; }
    .btn:hover{ transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,.15); }
    .card:hover{ transform: translateY(-4px); box-shadow: 0 12px 40px rgba(0,0,0,.2); }
    .kpi:hover{ transform: translateY(-2px); }
    
    /* Loading spinner */
    .loading{ display: inline-block; width: 20px; height: 20px; border: 2px solid #f3f3f3; border-top: 2px solid #2563eb; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin{ 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    
    /* Testimonios */
    .testimonials{ display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
    .testimonial{ background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; position: relative; }
    .testimonial::before{ content: '"'; font-size: 48px; color: #2563eb; position: absolute; top: 10px; left: 15px; opacity: 0.3; }
    .testimonial-text{ margin: 20px 0 15px; font-style: italic; }
    .testimonial-author{ font-weight: 600; color: #2563eb; }
    .testimonial-role{ color: var(--muted); font-size: 14px; }

    /* Cookies Banner */
    .cookies-banner{ position: fixed; bottom: 0; left: 0; right: 0; background: var(--card); border-top: 1px solid var(--border); padding: 16px 20px; z-index: 1000; transform: translateY(100%); transition: transform 0.3s ease; }
    .cookies-banner.show{ transform: translateY(0); }
    .cookies-content{ display: flex; align-items: center; justify-content: space-between; gap: 16px; max-width: var(--maxw); margin: 0 auto; }
    .cookies-text{ flex: 1; font-size: 14px; color: var(--muted); }
    .cookies-actions{ display: flex; gap: 10px; align-items: center; }
    .cookies-actions .btn{ height: 36px; padding: 0 12px; font-size: 13px; }

    /* ===== RESPONSIVE DESIGN COMPLETO ===== */
    @media (max-width: 768px) {
      /* Márgenes laterales para móviles */
      .container {
        padding: 0 16px !important;
      }
      
      .section {
        padding: 32px 0;
      }
      
      .card {
        margin: 0 4px 20px 4px;
      }
      
      /* Header móvil */
      .nav {
        flex-direction: column;
        gap: 16px;
        padding: 24px 0 20px 0;
      }
      
      header {
        padding-top: 16px;
      }
      
      .nav .actions {
        flex-direction: column;
        width: 100%;
        gap: 8px;
      }
      
      .nav .actions .btn {
        width: 100%;
        text-align: center;
      }
      
      /* Hero section móvil */
      .hero {
        padding: 40px 16px;
        text-align: center;
      }
      
      .hero h1 {
        font-size: 28px;
        line-height: 1.2;
        margin-bottom: 16px;
      }
      
      .hero .lead {
        font-size: 16px;
        margin-bottom: 24px;
      }
      
      /* Cards responsive */
      .card {
        margin-bottom: 20px;
        padding: 20px;
      }
      
      /* Grid responsive */
      .checklist {
        grid-template-columns: 1fr;
        gap: 16px;
      }
      
      .features-grid {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
      }
      
      /* Tabla responsive */
      .table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      
      .table-container table {
        min-width: 600px;
        font-size: 14px;
      }
      
      .table-container th,
      .table-container td {
        padding: 8px 6px;
        white-space: nowrap;
      }
      
      /* Botones de acción en tabla */
      .table-container .btn {
        padding: 4px 8px;
        font-size: 11px;
        margin: 2px;
      }
      
      /* Calculadora móvil */
      .calculator-grid {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
      }
      
      .calculator-input {
        height: 44px !important;
        font-size: 16px !important;
      }
      
      /* Modales móviles */
      .modal-content {
        width: 95vw !important;
        max-width: none !important;
        margin: 20px auto !important;
        max-height: 90vh !important;
      }
      
      /* Elementos específicos con márgenes */
      .hero {
        padding: 40px 16px;
      }
      
      .kpis {
        margin: 0 8px 18px 8px;
      }
      
      .testimonials {
        margin: 20px 8px;
      }
      
      .pricing {
        margin: 0 8px;
      }
      
      /* Formularios móviles */
      .form-grid {
        grid-template-columns: 1fr !important;
        gap: 16px !important;
      }
      
      /* Footer móvil */
      .footer-content {
        flex-direction: column;
        text-align: center;
        gap: 20px;
      }
      
      /* Pricing cards móvil */
      .pricing {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .pricing .card {
        margin-bottom: 16px;
      }
      
      /* Elementos específicos con márgenes en móviles pequeños */
      .hero {
        padding: 30px 12px;
      }
      
      .kpis {
        margin: 0 4px 16px 4px;
      }
      
      .testimonials {
        margin: 16px 4px;
      }
      
      .pricing {
        margin: 0 4px;
      }
      
    }
    
    @media (max-width: 480px) {
      /* Móviles pequeños - márgenes más amplios */
      .container {
        padding: 0 12px !important;
      }
      
      .card {
        margin: 0 2px 16px 2px;
      }
      
      /* Header móviles pequeños - más separación del techo */
      .nav {
        padding: 28px 0 24px 0;
      }
      
      header {
        padding-top: 20px;
      }
      
      .hero h1 {
        font-size: 24px;
      }
      
      .hero .lead {
        font-size: 14px;
      }
      
      .card {
        padding: 16px;
        margin-bottom: 16px;
      }
      
      .btn {
        padding: 12px 16px;
        font-size: 14px;
      }
      
      /* Tabla ultra compacta */
      .table-container table {
        min-width: 500px;
        font-size: 12px;
      }
      
      .table-container th,
      .table-container td {
        padding: 6px 4px;
      }
      
      /* Botones de tabla más pequeños */
      .table-container .btn {
        padding: 3px 6px;
        font-size: 10px;
        min-width: 60px;
      }
      
      /* Modales más pequeños */
      .modal-content {
        width: 98vw !important;
        margin: 10px auto !important;
        padding: 16px !important;
      }
      
      /* Calculadora compacta */
      .calculator-results {
        padding: 20px !important;
      }
      
      .calculator-results h3 {
        font-size: 18px !important;
      }
      
      .calculator-results .price {
        font-size: 24px !important;
      }
    }
    
    /* Mejoras generales para touch */
    @media (hover: none) and (pointer: coarse) {
      .btn {
        min-height: 44px;
        padding: 12px 20px;
      }
      
      .btn:hover {
        transform: none;
      }
      
      .btn:active {
        transform: scale(0.98);
      }
      
      /* Inputs más grandes para touch */
      input, select, textarea {
        min-height: 44px;
        font-size: 16px;
      }
    }
    
    /* ===== ARREGLOS ESPECÍFICOS ===== */
    
    /* Vista previa del dashboard - arreglar scroll horizontal */
    #dashboard .table-container {
      max-width: 100%;
      overflow-x: auto;
      margin: 0 auto;
    }
    
      #dashboard .kpis {
        max-width: 100%;
        overflow-x: auto;
      }
    
    /* Modales centrados correctamente */
    .modal {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .modal-content {
      position: relative;
      left: auto;
      top: auto;
      transform: none;
      margin: 0;
      max-width: 90vw;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    /* Datos centralizados - arreglar texto que se sale */
    #datos .checklist {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)) !important;
      gap: 16px !important;
    }
    
    #datos .check {
      text-align: center;
      white-space: nowrap;
    }
    
    /* Calculadora - arreglar incremento doble */
    .calculator-input {
      user-select: none;
    }
    
    /* ===== MEJORAS PARA MÓVILES ===== */
    
    /* Botones táctiles más grandes en móviles */
    @media (max-width: 768px) {
      #incrementBtn, #decrementBtn {
        min-width: 44px !important;
        min-height: 44px !important;
        font-size: 16px !important;
        touch-action: manipulation;
      }
      
      /* Efectos táctiles mejorados */
      #incrementBtn:active, #decrementBtn:active {
        transform: scale(0.9) !important;
        background: #1d4ed8 !important;
      }
    }
    
    /* Prevenir selección de texto en botones táctiles */
    #incrementBtn, #decrementBtn {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
    }
  </style>
  <!-- Tema claro: sobreescritura para apariencia similar a public/guest-registration.html -->
  <style>
    :root{
      --bg: #eef6ff; /* azul pastel muy tenue para el fondo */
      --card: #ffffff;
      --text: #0f172a;
      --muted: #475569;
      --brand: #2563eb;
      --accent: #16a34a;
      --danger: #ef4444;
      --ring: rgba(37,99,235,.18);
      --border: rgba(15,23,42,.08);
    }
    
    /* Navegación suave */
    html { 
      scroll-behavior: smooth; 
      scroll-padding-top: 80px; /* Espacio para el header fijo */
    }
    
    /* Estado activo para enlaces de navegación */
    .nav a.active {
      background: var(--brand) !important;
      color: white !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }
    
    /* Efecto hover mejorado para botones de navegación */
    .nav a:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.2);
      transition: all 0.2s ease;
    }
    body{ background: var(--bg); color: var(--text); }
    header{ background:#ffffff; border-bottom:1px solid var(--border); backdrop-filter: none; }
    .nav{ padding: 16px 0; }
    
    /* KPIs con fondo blanco como las demás tarjetas */
    .kpi{ 
      background: #ffffff !important; 
      border: 1px solid #e2e8f0 !important; 
      border-radius: 14px; 
      padding: 16px; 
      display: flex; 
      align-items: center; 
      gap: 14px; 
      box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
    }
    .logo{ background: transparent; }
    .btn{ height: 42px; padding: 0 16px; border:1px solid rgba(15,23,42,.12); background:#ffffff; color:#0f172a }
    .btn:hover{ background:#f8fafc; border-color: rgba(15,23,42,.18) }
    .btn.primary{ background: #2563eb; color:#ffffff; border-color:#2563eb; box-shadow: 0 6px 18px var(--ring) }
    .hero{ padding: 48px 0 20px }
    .hero-card, .card, details{ background:#ffffff; border:1px solid var(--border); }
    .badge{ background:#e2e8f0; color:#0f172a }
    .section{ padding: 28px 0 }
    .note{ color:#64748b }
    table thead th{ background:#f8fafc }
    table td, table th{ border-color: var(--border) }
    footer{ background:#ffffff; border-top:1px solid var(--border) }
    /* Logos en texto, legibles y en negrita */
    .logos .logo-txt{ font-weight:800; font-family: system-ui, Inter, Segoe UI, Roboto, Arial, sans-serif }
    /* Registro de viajeros: campos en claro */
    #form-registro label span{ color:#0f172a; font-weight:600 }
    #form-registro input, #form-registro select, #form-registro textarea{
      background:#ffffff !important;
      color:#0f172a !important;
      border:1px solid rgba(15,23,42,.2) !important;
      border-radius:10px;
      height:40px;
      padding:0 12px;
    }
    #form-registro input::placeholder, #form-registro textarea::placeholder{ color:#64748b }
    #form-registro .btn{ border-color: rgba(15,23,42,.12); background:#ffffff; color:#0f172a }
    #form-registro .btn:hover{ background:#f8fafc }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo" aria-hidden="true">🐬</div>
        <b>Delfín Check‑in</b>
      </div>
      <div class="actions">
        <a class="btn primary" href="#precio">Precios</a>
        <a class="btn" href="#caracteristicas">Funciones</a>
      </div>
    </div>
  </header>

  <main>
    <section class="hero container" id="inicio">
      <div class="badges">
        <span class="badge">Check‑in online</span>
        <span class="badge">Gestión de reservas</span>
        <span class="badge">Panel sencillo</span>
      </div>
      <h1>Gestiona tu alojamiento sin complicarte, con reservas, habitaciones y check‑in online</h1>
      <p>Centraliza la operativa diaria: recopila documentación antes de la llegada y reduce el tiempo en recepción. Ideal para hoteles, hostales y apartamentos turísticos.</p>
      <div class="hero-card">
        <div class="checklist">
          <div class="check"><i>✔</i> Check‑in online con verificación de datos.</div>
          <div class="check"><i>✔</i> Gestión de habitaciones, tarifas y disponibilidad.</div>
          <div class="check"><i>✔</i> Informes y exportación.</div>
          <div class="check"><i>✔</i> Dashboard de reservas.</div>
        </div>
      </div>
      <div class="logos">
        <div class="brand-box">
          <div class="brand-name">Booking</div>
          <img alt="Logo Booking" src="https://upload.wikimedia.org/wikipedia/commons/b/be/Booking.com_logo.svg">
        </div>
        <div class="brand-box">
          <div class="brand-name">Airbnb</div>
          <img alt="Logo Airbnb" src="https://upload.wikimedia.org/wikipedia/commons/6/69/Airbnb_Logo_Bélo.svg">
        </div>
        <div class="brand-box">
          <div class="brand-name">Expedia</div>
          <img alt="Logo Expedia" src="https://upload.wikimedia.org/wikipedia/commons/3/3b/Expedia_Logo_2023.svg">
        </div>
        <div class="brand-box">
          <div class="brand-name">Vrbo</div>
          <img alt="Logo Vrbo" src="https://upload.wikimedia.org/wikipedia/commons/5/51/Vrbo.svg">
        </div>
      </div>
      
      <!-- Badges de confianza -->
      <div style="display: flex; justify-content: center; align-items: center; gap: 24px; margin-top: 20px; flex-wrap: wrap;">
        <div style="display: flex; align-items: center; gap: 8px; padding: 8px 16px; background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 20px; font-size: 14px; font-weight: 600; color: #2563eb;">
          <span>🔒</span>
          <span>SSL Seguro</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px; padding: 8px 16px; background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 20px; font-size: 14px; font-weight: 600; color: #16a34a;">
          <span>🛡️</span>
          <span>RGPD Compliant</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px; padding: 8px 16px; background: #fef3c7; border: 1px solid #fde68a; border-radius: 20px; font-size: 14px; font-weight: 600; color: #d97706;">
          <span>⭐</span>
          <span>4.8/5 Valoración</span>
        </div>
        <div style="display: flex; align-items: center; gap: 8px; padding: 8px 16px; background: #f3e8ff; border: 1px solid #c4b5fd; border-radius: 20px; font-size: 14px; font-weight: 600; color: #7c3aed;">
          <span>🚀</span>
          <span>99.9% Uptime</span>
        </div>
      </div>
    </section>

    <!-- Vista previa tipo admin/dashboard -->
    <section id="dashboard" class="section container" aria-labelledby="dashboard-title">
      <h2 id="dashboard-title" data-es="Vista previa del Dashboard" data-en="Dashboard Preview">Vista previa del Dashboard</h2>
      <p class="lead" data-es="Una muestra simple de cómo verías tus métricas y operaciones diarias." data-en="A simple preview of how you would see your metrics and daily operations.">Una muestra simple de cómo verías tus métricas y operaciones diarias.</p>
      <div class="kpis">
        <div class="kpi">
          <div class="ic" style="background:#e0ecff">🏠</div>
          <div>
            <div class="meta" data-es="Habitaciones" data-en="Rooms">Habitaciones</div>
            <div class="value" id="kpi-rooms">—</div>
          </div>
        </div>
        <div class="kpi">
          <div class="ic" style="background:#dcfce7">👥</div>
          <div>
            <div class="meta" data-es="Huéspedes Hoy" data-en="Guests Today">Huéspedes Hoy</div>
            <div class="value" id="kpi-guests">—</div>
          </div>
        </div>
        <div class="kpi">
          <div class="ic" style="background:#fef9c3">📅</div>
          <div>
            <div class="meta" data-es="Reservas Activas" data-en="Active Reservations">Reservas Activas</div>
            <div class="value" id="kpi-active">—</div>
          </div>
        </div>
        <div class="kpi">
          <div class="ic" style="background:#f5e8ff">📈</div>
          <div>
            <div class="meta" data-es="Ocupación" data-en="Occupancy">Ocupación</div>
            <div class="value" id="kpi-occ">—</div>
          </div>
        </div>
        <div class="kpi" style="grid-column: span 2">
          <div class="ic" style="background:#e5f4ff">💶</div>
          <div>
            <div class="meta" data-es="Facturación" data-en="Revenue">Facturación</div>
            <div class="value" id="kpi-revenue">—</div>
          </div>
        </div>
        <div class="kpi">
          <div class="ic" style="background:#ffe4e6">💳</div>
          <div>
            <div class="meta" data-es="Comisiones Pagadas" data-en="Commissions Paid">Comisiones Pagadas</div>
            <div class="value" id="kpi-fees">—</div>
          </div>
        </div>
        <div class="kpi">
          <div class="ic" style="background:#e0ecff">📊</div>
          <div>
            <div class="meta" data-es="Ganancia Neta" data-en="Net Profit">Ganancia Neta</div>
            <div class="value" id="kpi-profit">—</div>
          </div>
        </div>
      </div>
      

      <div class="card" style="margin-top:16px">
        <h3 style="margin:0 0 8px" data-es="Gestión de reservas" data-en="Reservation Management">Gestión de reservas</h3>
        <div class="table-container">
          <table style="width:100%; border-collapse:collapse">
          <thead>
            <tr style="color:var(--muted); font-size:13px; text-align:left">
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Habitación" data-en="Room">Habitación</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Huésped" data-en="Guest">Huésped</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Llegada" data-en="Arrival">Llegada</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Salida" data-en="Departure">Salida</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Estado" data-en="Status">Estado</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Pagó huésped" data-en="Guest paid">Pagó huésped</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Comisión" data-en="Commission">Comisión</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Tu ganancia" data-en="Your profit">Tu ganancia</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Canal" data-en="Channel">Canal</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Teléfono" data-en="Phone">Teléfono</th>
              <th style="padding:10px 8px; border-bottom:1px solid rgba(255,255,255,.08)" data-es="Email" data-en="Email">Email</th>
            </tr>
          </thead>
          <tbody id="res-tbody"></tbody>
        </table>
      </div>
    </section>

    <section id="caracteristicas" class="section container">
      <h2 data-es="Todo lo que necesitas para el día a día" data-en="Everything you need for daily operations">Todo lo que necesitas para el día a día</h2>
      <p class="lead" data-es="Simplifica tareas repetitivas y mejora la experiencia del huésped. <strong>Importante:</strong> Las reservas se crean manualmente desde la página web de Delfín Check-in, no hay conexión automática con Booking, Airbnb u otros portales." data-en="Simplify repetitive tasks and improve guest experience. <strong>Important:</strong> Reservations are created manually from the Delfín Check-in website, there is no automatic connection with Booking, Airbnb or other portals.">Simplifica tareas repetitivas y mejora la experiencia del huésped. <strong>Importante:</strong> Las reservas se crean manualmente desde la página web de Delfín Check-in, no hay conexión automática con Booking, Airbnb u otros portales.</p>
      <div class="features-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
        <style>
          .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
          }
        </style>
        <div class="feature-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #3b82f6; transition: transform 0.2s ease;">
          <div style="display: flex; align-items: center; margin-bottom: 12px;">
            <div style="background: #3b82f6; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; font-weight: bold;">1</div>
            <h3 style="margin: 0; color: #1e40af; font-size: 18px;">Gestión manual de reservas</h3>
          </div>
          <p style="margin: 0; color: #64748b; line-height: 1.5;">Crear nuevas reservas desde "Nueva reserva" en el panel web</p>
        </div>

        <div class="feature-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #10b981; transition: transform 0.2s ease;">
          <div style="display: flex; align-items: center; margin-bottom: 12px;">
            <div style="background: #10b981; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; font-weight: bold;">2</div>
            <h3 style="margin: 0; color: #047857; font-size: 18px;">Gestión de habitaciones</h3>
          </div>
          <p style="margin: 0; color: #64748b; line-height: 1.5;">Asignar habitaciones específicas a cada reserva</p>
        </div>

        <div class="feature-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #f59e0b; transition: transform 0.2s ease;">
          <div style="display: flex; align-items: center; margin-bottom: 12px;">
            <div style="background: #f59e0b; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; font-weight: bold;">3</div>
            <h3 style="margin: 0; color: #d97706; font-size: 18px;">Pre‑check‑in online</h3>
          </div>
          <p style="margin: 0; color: #64748b; line-height: 1.5;">Enviar enlace al huésped para completar datos antes de llegar</p>
        </div>

        <div class="feature-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #8b5cf6; transition: transform 0.2s ease;">
          <div style="display: flex; align-items: center; margin-bottom: 12px;">
            <div style="background: #8b5cf6; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; font-weight: bold;">4</div>
            <h3 style="margin: 0; color: #7c3aed; font-size: 18px;">Sincronización móvil</h3>
          </div>
          <p style="margin: 0; color: #64748b; line-height: 1.5;">Las reservas del dashboard se sincronizan con el calendario de tu móvil</p>
        </div>

        <div class="feature-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #ef4444; transition: transform 0.2s ease;">
          <div style="display: flex; align-items: center; margin-bottom: 12px;">
            <div style="background: #ef4444; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; font-weight: bold;">5</div>
            <h3 style="margin: 0; color: #dc2626; font-size: 18px;">Registro de viajeros</h3>
          </div>
          <p style="margin: 0; color: #64748b; line-height: 1.5;">Generación automática de fichas para el Ministerio del Interior</p>
        </div>

        <div class="feature-card" style="background: white; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid #06b6d4; transition: transform 0.2s ease;">
          <div style="display: flex; align-items: center; margin-bottom: 12px;">
            <div style="background: #06b6d4; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px; font-weight: bold;">6</div>
            <h3 style="margin: 0; color: #0891b2; font-size: 18px;">Exportación de datos</h3>
          </div>
          <p style="margin: 0; color: #64748b; line-height: 1.5;">CSV/Excel para contabilidad y declaración de renta</p>
        </div>
      </div>
      <div class="note" style="margin-top:12px; padding:12px; background:#f0f9ff; border:1px solid #bae6fd; border-radius:8px;">
        <strong>Nota sobre integraciones:</strong> Sincronizamos calendarios mediante iCal (importación/exportación) con canales como Booking y Airbnb. Puedes crear reservas manualmente y mantener el calendario actualizado para facilitar el check‑in y el registro de viajeros.
      </div>
    </section>

    <!-- Registro de viajeros / Formulario multi‑idioma -->
    <section id="registro-viajeros" class="section container" aria-labelledby="registro-title">
      <h2 id="registro-title">Registro de viajeros (Ministerio del Interior)</h2>
      <p class="lead">Genera automáticamente las fichas y envíalas según normativa. Pide a tus huéspedes que completen un formulario seguro antes de llegar, disponible en varios idiomas.</p>

      <div class="card">
        <form id="form-registro" onsubmit="return false">
          <div style="display:flex; gap:10px; margin-bottom:12px; flex-wrap:wrap">
            <button class="btn" id="previewBtn" type="button">Previsualizar ficha</button>
          </div>
          <div class="form-grid" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:12px">
            <label>
              <span>Entrada (check‑in)</span>
              <input id="arrivalDt" type="datetime-local" style="width:100%; height:40px; border-radius:10px; background:#0c1428; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:0 12px">
            </label>
            <label>
              <span>Salida (check‑out)</span>
              <input id="departureDt" type="datetime-local" style="width:100%; height:40px; border-radius:10px; background:#0c1428; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:0 12px">
            </label>
            <label>
              <span>Idioma del formulario</span>
              <select id="lang" style="width:100%; height:40px; border-radius:10px; background:#0c1428; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:0 10px">
                <option value="es">Español</option>
                <option value="en">English</option>
                <option value="fr">Français</option>
                <option value="de">Deutsch</option>
                <option value="it">Italiano</option>
              </select>
            </label>
            <label>
              <span>Nombre y apellidos</span>
              <input id="guestName" required placeholder="Nombre del huésped" style="width:100%; height:40px; border-radius:10px; background:#0c1428; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:0 12px">
            </label>
            <label>
              <span>Documento (DNI/Pasaporte)</span>
              <input id="docNumber" required placeholder="Número de documento" style="width:100%; height:40px; border-radius:10px; background:#0c1428; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:0 12px">
            </label>
            <label>
              <span>Fecha de nacimiento</span>
              <input id="birthDate" type="date" required style="width:100%; height:40px; border-radius:10px; background:#0c1428; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:0 12px">
            </label>
            <label>
              <span>Nacionalidad</span>
              <input id="nationality" placeholder="Ej. Española" style="width:100%; height:40px; border-radius:10px; background:#0c1428; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:0 12px">
            </label>
            <label>
              <span>Correo</span>
              <input id="email" type="email" placeholder="email@ejemplo.com" style="width:100%; height:40px; border-radius:10px; background:#0c1428; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:0 12px">
            </label>
          </div>
          <p class="note" style="margin-top:10px">Este es un ejemplo estático para mostrar el flujo. En producción, se validan y almacenan los datos y se generan los ficheros oficiales.</p>
          <div class="note" style="margin-top:6px">
            <strong>Ejemplos de parte de viajero:</strong> DNI/NIE o Pasaporte, nombre completo, fecha de nacimiento, nacionalidad, dirección y contacto, fechas de entrada/salida.
          </div>
        </form>
      </div>
    </section>

    <!-- Instrucciones de uso en 3 pasos -->
    <section id="instrucciones" class="section container" aria-labelledby="steps-title">
      <h2 id="steps-title">Cómo usar Delfín Check‑in en 3 pasos</h2>
      <p class="lead">Guía rápida para enviar, recibir y presentar los partes de viajero.</p>
      <div class="pricing" style="grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));">
        <article class="card">
          <h3>Paso 1 · Enviar formulario</h3>
          <p class="note">Envía al huésped el enlace del <strong>formulario de registro de parte de viajero</strong> en su idioma.</p>
        </article>
        <article class="card">
          <h3>Paso 2 · Recibir en Delfín Check‑in</h3>
          <p class="note">Cuando el huésped lo completa, el <strong>parte de viajero</strong> llega automáticamente a <strong>Delfín Check‑in</strong> y queda guardado.</p>
        </article>
        <article class="card">
          <h3>Paso 3 · Envío directo al Ministerio sin coste extra</h3>
          <p class="note">El sistema envía automáticamente los <strong>partes de viajero</strong> al <strong>Ministerio del Interior de España</strong> siguiendo la normativa, sin coste adicional.</p>
        </article>
      </div>
    </section>

    <!-- Datos centralizados y descarga para renta anual -->
    <section id="datos" class="section container" aria-labelledby="datos-title">
      <h2 id="datos-title">Todos los datos centralizados</h2>
      <p class="lead">Exporta un único archivo con todos los ingresos y reservas para tu declaración de la renta anual. Ahorra tiempo y errores.</p>
      <div class="card">
        <div class="checklist" style="grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); justify-items: center; gap: 16px;">
          <div class="check" style="justify-content: center; text-align: center; white-space: nowrap;"><i>✔</i> Descarga CSV/Excel unificado</div>
          <div class="check" style="justify-content: center; text-align: center; white-space: nowrap;"><i>✔</i> Rangos de fechas (mes/año fiscal)</div>
          <div class="check" style="justify-content: center; text-align: center; white-space: nowrap;"><i>✔</i> Datos listos para asesoría</div>
        </div>
        <div class="cta" style="margin-top:12px">
          <a class="btn primary" href="#" id="downloadCsvBtn">Descargar ejemplo (CSV)</a>
          
        </div>
      </div>
    </section>

    <section id="precio" class="section container">
      <h2 data-es="Precios simples y claros" data-en="Simple and clear pricing">Precios simples y claros</h2>
      <p class="lead" data-es="Precio por propiedad con descuentos por volumen. Cuantas más propiedades, mejor precio por unidad. <strong>Precio vigente hasta el próximo ajuste.</strong>" data-en="Price per property with volume discounts. More properties, better price per unit. <strong>Current price until next adjustment.</strong>">Precio por propiedad con descuentos por volumen. Cuantas más propiedades, mejor precio por unidad. <strong>Precio vigente hasta el próximo ajuste.</strong></p>
      
      <!-- Tabla de precios por volumen -->
      <div class="card" style="margin-bottom: 32px; padding: 24px;">
        <h3 style="text-align: center; margin-bottom: 24px;" data-es="Precios por volumen" data-en="Volume pricing">Precios por volumen</h3>
        <p style="text-align: center; margin-bottom: 24px; color: #64748b; font-size: 16px;" data-es="Cuanto más propiedades tengas, mejor precio por unidad obtienes" data-en="The more properties you have, the better price per unit you get">Cuanto más propiedades tengas, mejor precio por unidad obtienes</p>
        
        <div style="overflow-x: auto;">
          <table style="width: 100%; border-collapse: collapse; font-size: 16px; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
            <thead>
              <tr style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white;">
                <th style="padding: 20px 16px; text-align: left; font-weight: 700; font-size: 18px;">N° de propiedades</th>
                <th style="padding: 20px 16px; text-align: center; font-weight: 700; font-size: 18px;">Descuento</th>
                <th style="padding: 20px 16px; text-align: center; font-weight: 700; font-size: 18px;">Precio unitario mensual</th>
                <th style="padding: 20px 16px; text-align: center; font-weight: 700; font-size: 18px;">Total mensual</th>
              </tr>
            </thead>
            <tbody>
              <tr style="border-bottom: 1px solid #e5e7eb;">
                <td style="padding: 16px; font-weight: 600; color: #1f2937;">1 propiedad</td>
                <td style="padding: 16px; text-align: center; color: #6b7280;">-</td>
                <td style="padding: 16px; text-align: center; font-weight: 600; color: #1f2937;">14,99 €</td>
                <td style="padding: 16px; text-align: center; font-weight: 700; color: #1f2937; font-size: 18px;">14,99 €</td>
              </tr>
              <tr style="border-bottom: 1px solid #e5e7eb; background: #f8fafc;">
                <td style="padding: 16px; font-weight: 600; color: #1f2937;">2 propiedades</td>
                <td style="padding: 16px; text-align: center; color: #059669; font-weight: 600;">10%</td>
                <td style="padding: 16px; text-align: center; font-weight: 600; color: #1f2937;">13,49 €</td>
                <td style="padding: 16px; text-align: center; font-weight: 700; color: #1f2937; font-size: 18px;">26,98 €</td>
              </tr>
              <tr style="border-bottom: 1px solid #e5e7eb;">
                <td style="padding: 16px; font-weight: 600; color: #1f2937;">4 propiedades</td>
                <td style="padding: 16px; text-align: center; color: #059669; font-weight: 600;">15%</td>
                <td style="padding: 16px; text-align: center; font-weight: 600; color: #1f2937;">12,74 €</td>
                <td style="padding: 16px; text-align: center; font-weight: 700; color: #1f2937; font-size: 18px;">50,96 €</td>
              </tr>
              <tr style="border-bottom: 1px solid #e5e7eb; background: #f8fafc;">
                <td style="padding: 16px; font-weight: 600; color: #1f2937;">5-9 propiedades</td>
                <td style="padding: 16px; text-align: center; color: #059669; font-weight: 600;">20%</td>
                <td style="padding: 16px; text-align: center; font-weight: 600; color: #1f2937;">11,99 €</td>
                <td style="padding: 16px; text-align: center; font-weight: 700; color: #1f2937; font-size: 18px;">59,95 €</td>
              </tr>
              <tr style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);">
                <td style="padding: 16px; font-weight: 700; color: #92400e;">10+ propiedades</td>
                <td style="padding: 16px; text-align: center; color: #059669; font-weight: 700;">25%</td>
                <td style="padding: 16px; text-align: center; font-weight: 700; color: #92400e;">11,24 €</td>
                <td style="padding: 16px; text-align: center; font-weight: 800; color: #92400e; font-size: 20px;">112,40 €</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div style="margin-top: 24px; padding: 20px; background: #ecfdf5; border-radius: 12px; border-left: 4px solid #10b981;">
          <h4 style="margin: 0 0 12px 0; color: #065f46; font-weight: 700;">💡 Descuento anual adicional</h4>
          <p style="margin: 0; color: #047857; font-size: 16px;" data-es="Todos los planes incluyen un 16,7% de descuento adicional si pagas anualmente (equivalente a 2 meses gratis)" data-en="All plans include an additional 16.7% discount if you pay annually (equivalent to 2 months free)">Todos los planes incluyen un <strong>16,7% de descuento adicional</strong> si pagas anualmente (equivalente a 2 meses gratis)</p>
        </div>
      </div>
      
      <!-- Calculadora de precios -->
      <div class="card" style="margin-bottom: 32px; padding: 0; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border: 2px solid #2563eb; border-radius: 16px; overflow: hidden; box-shadow: 0 10px 30px rgba(37, 99, 235, 0.1);">
        <!-- Header con gradiente -->
        <div style="background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); padding: 24px; text-align: center; color: white;">
          <div style="font-size: 32px; margin-bottom: 8px;">💰</div>
          <h3 style="margin: 0 0 8px; font-size: 24px; font-weight: 700;">Calculadora de precios</h3>
          <p style="margin: 0; opacity: 0.9; font-size: 16px;">Descubre cuánto te costaría Delfín Check-in según tus necesidades</p>
        </div>
        
        <!-- Contenido principal -->
        <div style="padding: 32px;">
          <div class="calculator-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; margin-bottom: 32px;">
            <!-- Selector de propiedades -->
            <div style="position: relative;">
              <label style="display: block; margin-bottom: 12px; font-weight: 600; color: var(--text); font-size: 16px;">
                🏠 Número de propiedades
              </label>
              <div style="position: relative;">
                <input type="number" id="calcProperties" min="1" max="50" value="1" readonly class="calculator-input"
                       style="width: 100%; height: 50px; border-radius: 12px; border: 2px solid #e2e8f0; padding: 0 20px 0 20px; font-size: 18px; text-align: center; font-weight: 600; color: #2563eb; background: white; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.05); -moz-appearance: textfield; cursor: default;"
                       onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 3px rgba(37, 99, 235, 0.1)'"
                       onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.05)'"
                       onkeydown="return false;"
                       onpaste="return false;"
                       oninput="return false;">
                <!-- Flechas personalizadas más grandes y bonitas -->
                <div style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 2px; pointer-events: auto; z-index: 10;">
           <button type="button" id="incrementBtn"
                   onmousedown="startIncrement()"
                   onmouseup="stopIncrement()"
                   onmouseleave="stopIncrement()"
                   onclick="singleIncrement()"
                          style="width: 24px; height: 20px; background: #2563eb; color: white; border: none; border-radius: 4px 4px 0 0; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; transition: all 0.2s ease; user-select: none;"
                          onmouseover="this.style.background='#1d4ed8'"
                          onmouseout="this.style.background='#2563eb'">▲</button>
                  <button type="button" id="decrementBtn"
                          onmousedown="startDecrement()"
                          onmouseup="stopDecrement()"
                          onmouseleave="stopDecrement()"
                          onclick="singleDecrement()"
                          style="width: 24px; height: 20px; background: #2563eb; color: white; border: none; border-radius: 0 0 4px 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; transition: all 0.2s ease; user-select: none;"
                          onmouseover="this.style.background='#1d4ed8'"
                          onmouseout="this.style.background='#2563eb'">▼</button>
                </div>
                <div style="position: absolute; right: 40px; top: 50%; transform: translateY(-50%); color: #94a3b8; font-size: 14px; font-weight: 500; pointer-events: none;">propiedades</div>
              </div>
            </div>
            
            <!-- Selector de plan -->
            <div>
              <label style="display: block; margin-bottom: 12px; font-weight: 600; color: var(--text); font-size: 16px;">
                📅 Tipo de plan
              </label>
              <div style="position: relative;">
                <select id="calcPlan" class="calculator-input" style="width: 100%; height: 50px; border-radius: 12px; border: 2px solid #e2e8f0; padding: 0 50px 0 20px; font-size: 16px; font-weight: 500; background: white; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.05); appearance: none; -webkit-appearance: none; -moz-appearance: none;"
                        onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 0 0 3px rgba(37, 99, 235, 0.1)'"
                        onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.05)'">
                  <option value="monthly">💳 Mensual (14,99€/propiedad)</option>
                  <option value="yearly" selected>🎯 Anual (descuento 16,7%) - RECOMENDADO</option>
                </select>
                <!-- Flecha personalizada para el select -->
                <div style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #2563eb; font-size: 16px; font-weight: bold;">▼</div>
              </div>
            </div>
          </div>
          
          <!-- Resultados con diseño mejorado -->
          <div id="calcResults" class="calculator-results" style="background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); border-radius: 16px; padding: 32px; text-align: center; border: 2px solid #e2e8f0; position: relative; overflow: hidden;">
            <!-- Decoración de fondo -->
            <div style="position: absolute; top: -20px; right: -20px; width: 100px; height: 100px; background: linear-gradient(135deg, #2563eb, #1d4ed8); border-radius: 50%; opacity: 0.1;"></div>
            <div style="position: absolute; bottom: -30px; left: -30px; width: 80px; height: 80px; background: linear-gradient(135deg, #16a34a, #15803d); border-radius: 50%; opacity: 0.1;"></div>
            
            <div style="position: relative; z-index: 1;">
              <div style="font-size: 36px; font-weight: 900; color: #2563eb; margin-bottom: 12px; text-shadow: 0 2px 4px rgba(37, 99, 235, 0.1);" id="calcTotal">149,90€/año</div>
              <div style="color: #64748b; margin-bottom: 16px; font-size: 16px; font-weight: 500;" id="calcPerProperty">14,99€ por propiedad</div>
              <div style="color: #16a34a; font-weight: 700; font-size: 18px; padding: 8px 16px; background: rgba(22, 163, 74, 0.1); border-radius: 20px; display: inline-block;" id="calcSavings">Ahorras 29,90€ al año</div>
            </div>
          </div>
          
        </div>
      </div>
      
      <div class="pricing">
        <article class="card" itemscope itemtype="https://schema.org/Offer">
          <h3 itemprop="name">Plan mensual</h3>
          <div class="price"><strong itemprop="price" content="14.99">14,99€</strong><small>/ propiedad / mes</small></div>
          <meta itemprop="priceCurrency" content="EUR">
          <ul class="features">
            <li>Gestión manual de reservas</li>
            <li>Check‑in online</li>
            <li>Gestión de habitaciones</li>
            <li>Registro de viajeros</li>
            <li>Soporte por email</li>
          </ul>
          <div class="cta">
            <button class="btn primary" onclick="startPayment('monthly')" style="width: 100%; padding: 16px; font-size: 18px; font-weight: 700;">Contratar</button>
          </div>
          <p class="note">Sin permanencia. Cancela cuando quieras.</p>
        </article>
        <article class="card" itemscope itemtype="https://schema.org/Offer" style="border: 2px solid #2563eb; position: relative;">
          <div style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: #2563eb; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600;">Recomendado</div>
          <h3 itemprop="name">Plan anual</h3>
          <div class="price"><strong itemprop="price" content="149.90">149,90€</strong><small>/ propiedad / año</small></div>
          <meta itemprop="priceCurrency" content="EUR">
          <ul class="features">
            <li>Todo lo del mensual</li>
            <li>Descuento 16,7% por pago anual</li>
            <li>Soporte prioritario</li>
            <li>Onboarding asistido</li>
            <li>Equivale a 12,49€/mes</li>
          </ul>
          <div class="cta">
            <button class="btn primary" onclick="startPayment('yearly')" style="width: 100%; padding: 16px; font-size: 18px; font-weight: 700;">Contratar</button>
          </div>
          <p class="note">Ahorra 29,90€ al año por propiedad.</p>
        </article>
        <article class="card" itemscope itemtype="https://schema.org/Offer">
          <h3 itemprop="name">Descuentos por volumen</h3>
          <div class="price"><strong>Hasta 25%</strong><small>descuento</small></div>
          <div class="price"><strong>Desde 2 propiedades</strong><small>mejor precio</small></div>
          <ul class="features">
            <li>2 propiedades: 13,49€ cada una</li>
            <li>4 propiedades: 12,74€ cada una</li>
            <li>5-9 propiedades: 11,99€ cada una</li>
            <li>10+ propiedades: 11,24€ cada una</li>
          </ul>
          <div class="cta">
            <button class="btn primary" onclick="startPayment('volume')" style="width: 100%; padding: 16px; font-size: 18px; font-weight: 700;">Contratar</button>
          </div>
          <p class="note">Descuentos automáticos según volumen.</p>
        </article>
      </div>
      
    </section>

    <!-- Formulario de Contacto -->
    <section id="contacto" class="section container">
      <h2 data-es="¿Tienes alguna pregunta?" data-en="Do you have any questions?">¿Tienes alguna pregunta?</h2>
      <p class="lead" data-es="Contáctanos y te ayudaremos a encontrar la mejor solución para tu alojamiento." data-en="Contact us and we'll help you find the best solution for your accommodation.">Contáctanos y te ayudaremos a encontrar la mejor solución para tu alojamiento.</p>
      <div style="display: flex; flex-direction: column; gap: 32px;">
        <div class="card">
          <h3 data-es="Enviar mensaje" data-en="Send message">Enviar mensaje</h3>
          <form id="contactForm" onsubmit="return false">
            <div style="display: grid; gap: 12px; margin-bottom: 16px;">
              <label>
                <span data-es="Nombre *" data-en="Name *">Nombre *</span>
                <input id="contactName" required placeholder="Tu nombre completo" data-es-placeholder="Tu nombre completo" data-en-placeholder="Your full name" style="width: 100%; height: 40px; border-radius: 10px; background: #ffffff; color: #0f172a; border: 1px solid rgba(15,23,42,.2); padding: 0 12px;">
              </label>
              <label>
                <span data-es="Email *" data-en="Email *">Email *</span>
                <input id="contactEmail" type="email" required placeholder="tu@email.com" data-es-placeholder="tu@email.com" data-en-placeholder="your@email.com" style="width: 100%; height: 40px; border-radius: 10px; background: #ffffff; color: #0f172a; border: 1px solid rgba(15,23,42,.2); padding: 0 12px;">
              </label>
              <label>
                <span data-es="Empresa/Alojamiento" data-en="Company/Accommodation">Empresa/Alojamiento</span>
                <input id="contactBusiness" placeholder="Nombre de tu negocio" data-es-placeholder="Nombre de tu negocio" data-en-placeholder="Your business name" style="width: 100%; height: 40px; border-radius: 10px; background: #ffffff; color: #0f172a; border: 1px solid rgba(15,23,42,.2); padding: 0 12px;">
              </label>
              <label>
                <span data-es="Mensaje *" data-en="Message *">Mensaje *</span>
                <textarea id="contactMessage" required placeholder="Cuéntanos qué necesitas..." data-es-placeholder="Cuéntanos qué necesitas..." data-en-placeholder="Tell us what you need..." rows="4" style="width: 100%; border-radius: 10px; background: #ffffff; color: #0f172a; border: 1px solid rgba(15,23,42,.2); padding: 12px; resize: vertical;"></textarea>
              </label>
            </div>
            <div class="cta">
              <button class="btn primary" id="sendContact" type="submit" data-es="Enviar mensaje" data-en="Send message">Enviar mensaje</button>
            </div>
            <p class="note" style="margin-top: 12px;" data-es="Te responderemos en menos de 24 horas." data-en="We'll respond within 24 hours.">Te responderemos en menos de 24 horas.</p>
          </form>
        </div>
        <!-- Información de contacto compacta -->
        <div class="card" style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border: 1px solid #e2e8f0;">
          <h3 style="text-align: center; margin-bottom: 20px;">Información de contacto</h3>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; text-align: center;">
            <div>
              <div style="font-size: 20px; margin-bottom: 8px;">📧</div>
              <div style="font-weight: 600; color: var(--text); margin-bottom: 4px;">Email</div>
              <div style="color: var(--muted); font-size: 14px;">contacto@delfincheckin.com</div>
            </div>
            <div>
              <div style="font-size: 20px; margin-bottom: 8px;">🕒</div>
              <div style="font-weight: 600; color: var(--text); margin-bottom: 4px;">Horario</div>
              <div style="color: var(--muted); font-size: 14px;">Lun-Dom: 9:00-22:00</div>
            </div>
          </div>
          <div class="cta" style="margin-top: 20px; justify-content: center;">
            <a class="btn primary" href="mailto:contacto@delfincheckin.com?subject=Consulta%20Delfin%20Check-in" target="_blank" onclick="handleEmailDirecto(event)">Email directo</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonios -->
    <section id="testimonios" class="section container">
      <h2>Lo que dicen nuestros clientes</h2>
      <p class="lead">Hostales y apartamentos que ya confían en Delfín Check-in para su gestión diaria.</p>
      <div class="testimonials">
        <div class="testimonial">
          <div class="testimonial-text">Ahora no tengo que hacer el check‑in: está todo automatizado. Antes tardaba más de 10 minutos por huésped; ahora es automático y se envía de manera automática. Los huéspedes llegan con la documentación completa y el parte se envía al Ministerio sin complicaciones.</div>
          <div class="testimonial-author">María González</div>
          <div class="testimonial-role">Gerente, Hostal Centro Málaga</div>
        </div>
        <div class="testimonial">
          <div class="testimonial-text">El precio es imbatible: 4€ por propiedad. Otros PMS nos cobraban 50€/mes. La gestión manual es perfecta para nosotros, tenemos control total.</div>
          <div class="testimonial-author">Carlos Ruiz</div>
          <div class="testimonial-role">Propietario, Apartamentos Costa del Sol</div>
        </div>
        <div class="testimonial">
          <div class="testimonial-text">La exportación para la renta me ahorra horas cada mes. Un solo CSV con todos los datos. Mi asesor está encantado con la organización.</div>
          <div class="testimonial-author">Ana Martín</div>
          <div class="testimonial-role">Administradora, Pensión La Playa</div>
        </div>
      </div>
    </section>

    <section id="faq" class="section container">
      <h2>Preguntas frecuentes</h2>
      <details>
        <summary>¿Puedo cancelar cuando quiera?</summary>
        <p>
          Sí. El plan mensual funciona como una suscripción sin permanencia: puedes darte de baja en cualquier momento desde el panel o solicitándolo a soporte, y no se te volverán a emitir cargos a partir del siguiente ciclo. 
          Si eliges el plan anual, disfrutas de un precio reducido y la licencia permanece activa durante 12 meses completos; al finalizar el periodo puedes renovar o cambiarte a mensual sin penalización.
        </p>
      </details>
      <details>
        <summary>¿Incluye channel manager?</summary>
        <p>
          Trabajamos con conectores para sincronizar disponibilidad, tarifas y reservas con los principales portales (p. ej., Booking.com, Airbnb, Expedia). 
          La activación depende de tu mix de canales y del plan contratado. Si ya tienes un channel manager, podemos integrarnos para evitar duplicidades. 
          Te asesoramos en la configuración inicial para minimizar overbookings y mantener inventario unificado.
        </p>
      </details>
      <details>
        <summary>¿Cómo se hace el check‑in online?</summary>
        <p>
          Desde el dashboard generas o programas el envío de un enlace seguro al huésped (por email o WhatsApp). 
          El viajero completa sus datos, adjunta documentación y firma si procede, todo en su idioma. 
          La información llega validada al sistema y se consolida en el registro de viajeros para su posterior envío al Ministerio del Interior. 
          Al llegar, el proceso en recepción se reduce a validar identidad y entregar llaves.
        </p>
      </details>
      <details>
        <summary>¿Puedo exportar datos para la asesoría y la renta?</summary>
        <p>
          Sí. Puedes descargar un único archivo (CSV/Excel) con ingresos, tasas y ocupación filtrado por rango de fechas o ejercicio fiscal. 
          Además, el registro de viajeros se exporta en los formatos requeridos para su notificación oficial.
        </p>
      </details>
    </section>
  </main>

  <!-- Modal de previsualización -->
  <div id="previewModal" style="position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(15,23,42,.6); z-index:1000; backdrop-filter: blur(4px);">
    <div style="width:min(800px, 95vw); max-height:90vh; background:#ffffff; color:#0f172a; border-radius:16px; box-shadow:0 25px 80px rgba(0,0,0,.4); overflow:hidden; animation: slideIn 0.3s ease-out;">
      <!-- Header con gradiente -->
      <div style="background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); color: white; padding: 20px 24px; display:flex; align-items:center; justify-content:space-between;">
        <div style="display: flex; align-items: center; gap: 12px;">
          <div style="font-size: 24px;">📋</div>
          <div>
            <h3 style="margin: 0; font-size: 20px; font-weight: 700;">Previsualización de Ficha de Registro</h3>
            <p style="margin: 4px 0 0; font-size: 14px; opacity: 0.9;">Datos del huésped generados automáticamente</p>
          </div>
        </div>
        <button id="previewClose" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); height: 40px; width: 40px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; transition: all 0.2s ease;"
                onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                onmouseout="this.style.background='rgba(255,255,255,0.2)'">×</button>
      </div>
      
      <!-- Contenido principal -->
      <div style="padding: 24px; max-height: calc(90vh - 100px); overflow-y: auto;">
        <!-- Información personal -->
        <div style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid #e2e8f0;">
          <h4 style="margin: 0 0 16px; color: #1e40af; font-size: 16px; font-weight: 600; display: flex; align-items: center; gap: 8px;">
            👤 Información Personal
          </h4>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
            <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid #e2e8f0;">
              <div style="color: #64748b; font-size: 12px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Nombre completo</div>
              <div id="pv-name" style="font-weight: 600; color: #0f172a; font-size: 16px;"></div>
            </div>
            <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid #e2e8f0;">
              <div style="color: #64748b; font-size: 12px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Documento de identidad</div>
              <div id="pv-doc" style="font-weight: 600; color: #0f172a; font-size: 16px;"></div>
            </div>
            <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid #e2e8f0;">
              <div style="color: #64748b; font-size: 12px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Fecha de nacimiento</div>
              <div id="pv-birth" style="font-weight: 600; color: #0f172a; font-size: 16px;"></div>
            </div>
            <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid #e2e8f0;">
              <div style="color: #64748b; font-size: 12px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Nacionalidad</div>
              <div id="pv-nation" style="font-weight: 600; color: #0f172a; font-size: 16px;"></div>
            </div>
          </div>
        </div>

        <!-- Información de contacto -->
        <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid #bae6fd;">
          <h4 style="margin: 0 0 16px; color: #1e40af; font-size: 16px; font-weight: 600; display: flex; align-items: center; gap: 8px;">
            📧 Información de Contacto
          </h4>
          <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid #bae6fd;">
            <div style="color: #64748b; font-size: 12px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Correo electrónico</div>
            <div id="pv-email" style="font-weight: 600; color: #0f172a; font-size: 16px;"></div>
          </div>
        </div>

        <!-- Información de estancia -->
        <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid #bbf7d0;">
          <h4 style="margin: 0 0 16px; color: #166534; font-size: 16px; font-weight: 600; display: flex; align-items: center; gap: 8px;">
            🏨 Información de Estancia
          </h4>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
            <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid #bbf7d0;">
              <div style="color: #64748b; font-size: 12px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Fecha de entrada</div>
              <div id="pv-arrival" style="font-weight: 600; color: #0f172a; font-size: 16px;"></div>
            </div>
            <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid #bbf7d0;">
              <div style="color: #64748b; font-size: 12px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Fecha de salida</div>
              <div id="pv-departure" style="font-weight: 600; color: #0f172a; font-size: 16px;"></div>
            </div>
            <div style="background: white; padding: 12px; border-radius: 8px; border: 1px solid #bbf7d0;">
              <div style="color: #64748b; font-size: 12px; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Idioma del formulario</div>
              <div id="pv-lang" style="font-weight: 600; color: #0f172a; font-size: 16px;"></div>
            </div>
          </div>
        </div>

        <!-- Nota informativa -->
        <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 16px; text-align: center;">
          <div style="color: #92400e; font-size: 14px; font-weight: 500;">
            <strong>ℹ️ Nota:</strong> Esta es una previsualización con datos de ejemplo. En producción se generará el documento oficial conforme a la normativa del Ministerio del Interior.
          </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }
  </style>


    <footer>
      <div class="container">
        <div class="footer-content" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
          <div>
            <h4 style="margin: 0 0 10px; color: var(--text);">Delfín Check‑in</h4>
            <p style="margin: 0; color: var(--muted); font-size: 14px;">Software de gestión hotelera y auto check‑in para hostales y apartamentos.</p>
          </div>
          <div>
            <h4 style="margin: 0 0 10px; color: var(--text);">Contacto</h4>
            <p style="margin: 0; color: var(--muted); font-size: 14px;">
              📧 contacto@delfincheckin.com<br>
              🕒 Lun-Dom: 9:00-22:00
            </p>
          </div>
          <div>
            <h4 style="margin: 0 0 10px; color: var(--text);">Legal</h4>
            <p style="margin: 0; color: var(--muted); font-size: 14px;">
              <a href="politica-privacidad.html" style="color: var(--brand);">Política de Privacidad</a><br>
              <a href="politica-cookies.html" style="color: var(--brand);">Política de Cookies</a><br>
              <a href="terminos-servicio.html" style="color: var(--brand);">Términos de Servicio</a><br>
              <a href="aviso-legal.html" style="color: var(--brand);">Aviso Legal</a><br>
              <button id="manageCookies" style="background: none; border: none; color: var(--brand); cursor: pointer; text-decoration: underline; padding: 0; margin-top: 8px; font-size: 14px;">Gestionar Cookies</button>
            </p>
          </div>
        </div>
        <div style="border-top: 1px solid var(--border); padding-top: 15px; text-align: center; color: var(--muted);">
          © <span id="year"></span> Delfín Check‑in · <a href="#precio" style="color: var(--brand);">Ver precios</a>
        </div>
      </div>
    </footer>

  <!-- Modal de Pago Stripe -->
  <div id="paymentModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; align-items: center; justify-content: center; overflow-y: auto; padding: 20px;">
    <div style="background: white; padding: 25px; border-radius: 12px; max-width: 500px; width: 95%; position: relative; margin: 20px 0; max-height: 90vh; overflow-y: auto;">
      <button id="closePayment" style="position: absolute; top: 15px; right: 15px; background: none; border: none; font-size: 24px; cursor: pointer;">×</button>
      <h3 style="margin: 0 0 20px; color: #1e40af; text-align: center;">🐬 Contratar Delfín Check-in</h3>
      
      <!-- Resumen del pedido -->
      <div id="paymentInfo" style="margin-bottom: 25px; padding: 20px; background: #f0f9ff; border-radius: 12px; border-left: 4px solid #2563eb;">
        <h4 style="margin: 0 0 15px; color: #1e40af;">Resumen del Pedido</h4>
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span>Plan:</span>
          <span id="planName" style="font-weight: 600;"></span>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span>Propiedades:</span>
          <span id="planProperties">-</span>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span>Precio por propiedad:</span>
          <span id="planPrice">-</span>
        </div>
        <div style="display: flex; justify-content: space-between; font-weight: 700; font-size: 18px; color: #1e40af; border-top: 2px solid #e5e7eb; padding-top: 10px; margin-top: 10px;">
          <span>Total:</span>
          <span id="totalPrice">-</span>
        </div>
      </div>
      
      <form id="paymentForm">
        <!-- Número de propiedades -->
        <div style="margin-bottom: 20px;">
          <h4 style="margin: 0 0 12px; color: #374151; font-size: 16px;">Configuración</h4>
          <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px;">Número de propiedades <span style="color: #dc2626;">*</span></label>
            <input type="number" id="paymentProperties" min="1" value="1" style="width: 100%; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
          </div>
        </div>
        
        <!-- Datos del cliente -->
        <div style="margin-bottom: 20px;">
          <h4 style="margin: 0 0 12px; color: #374151; font-size: 16px;">Datos del Cliente</h4>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
            <div>
              <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px;">Nombre <span style="color: #dc2626;">*</span></label>
              <input type="text" id="paymentFirstName" placeholder="Nombre" required style="width: 100%; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
            </div>
            <div>
              <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px;">Apellidos <span style="color: #dc2626;">*</span></label>
              <input type="text" id="paymentLastName" placeholder="Apellidos" required style="width: 100%; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
            </div>
          </div>
          
          <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px;">Email <span style="color: #dc2626;">*</span></label>
            <input type="email" id="paymentEmail" placeholder="tu@email.com" required style="width: 100%; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
          </div>
          
          <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px;">Empresa/Alojamiento <span style="color: #dc2626;">*</span></label>
            <input type="text" id="paymentCompany" placeholder="Nombre de tu negocio" required style="width: 100%; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
          </div>
          
          <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px;">Dirección <span style="color: #dc2626;">*</span></label>
            <input type="text" id="paymentAddress" placeholder="Dirección completa" required style="width: 100%; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
          </div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 12px;">
            <div>
              <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px;">Ciudad <span style="color: #dc2626;">*</span></label>
              <input type="text" id="paymentCity" placeholder="Ciudad" required style="width: 100%; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
            </div>
            <div>
              <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px;">Código Postal <span style="color: #dc2626;">*</span></label>
              <input type="text" id="paymentPostalCode" placeholder="CP" required style="width: 100%; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
            </div>
            <div>
              <label style="display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px;">País <span style="color: #dc2626;">*</span></label>
              <select id="paymentCountry" required style="width: 100%; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
                <option value="">Seleccionar</option>
                <option value="ES" selected>España</option>
                <option value="FR">Francia</option>
                <option value="IT">Italia</option>
                <option value="PT">Portugal</option>
                <option value="DE">Alemania</option>
                <option value="GB">Reino Unido</option>
                <option value="US">Estados Unidos</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Información de pago -->
        <div style="margin-bottom: 20px;">
          <h4 style="margin: 0 0 12px; color: #374151; font-size: 16px;">Información de Pago</h4>
          <div id="cardElement" style="margin-bottom: 15px; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; background: white;">
            <!-- Stripe Elements se insertará aquí -->
          </div>
          <div id="cardErrors" style="color: #dc2626; margin-bottom: 15px; font-size: 14px;"></div>
        </div>
        
        <button type="submit" id="submitPayment" style="width: 100%; height: 50px; background: #2563eb; color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer;">
          <span id="buttonText">💳 Pagar ahora</span>
          <span id="spinner" style="display: none;">⏳ Procesando...</span>
        </button>
        
        <div style="margin-top: 15px; text-align: center; font-size: 12px; color: #64748b;">
          🔒 Pago 100% seguro procesado por Stripe
        </div>
      </form>
    </div>
  </div>

  <!-- Cookies Banner -->
  <div id="cookiesBanner" class="cookies-banner">
    <div class="cookies-content">
      <div class="cookies-text">
        🍪 <strong>Utilizamos cookies</strong> para mejorar tu experiencia, analizar el tráfico y personalizar contenido. 
        <a href="politica-privacidad.html" style="color: var(--brand); text-decoration: underline;">Política de Cookies</a> | 
        <a href="politica-privacidad.html" style="color: var(--brand); text-decoration: underline;">Privacidad</a>
      </div>
      <div class="cookies-actions">
        <button class="btn" id="cookiesReject">Solo necesarias</button>
        <button class="btn" id="cookiesCustomize">Personalizar</button>
        <button class="btn primary" id="cookiesAccept">Aceptar todas</button>
      </div>
    </div>
  </div>

  <!-- Stripe.js -->
  <script src="https://js.stripe.com/v3/"></script>
  
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    const $ = (s) => document.querySelector(s);
    const mapLang = { es:'Español', en:'English', fr:'Français', de:'Deutsch', it:'Italiano' };
    
    // Inicializar Stripe (reemplaza con tu clave pública)
    const stripe = Stripe('pk_live_51RGg0AGayGuUgznnZ1FfHOEfSlHEdiSAhSGKO41ckEowveEs4aojJVdEcrx3MpJUp4dmfLeZ84ybN9iCe5ClzU3p00bKSWKKWR'); // Cambiar por tu clave real
    const openModal = () => { $('#previewModal').style.display = 'flex'; document.body.style.overflow='hidden'; };
    const closeModal = () => { $('#previewModal').style.display = 'none'; document.body.style.overflow=''; };
    $('#previewClose').addEventListener('click', closeModal);
    // Función mejorada para previsualización de ficha
    function generatePreviewData() {
      const rnd = (min,max) => Math.floor(Math.random()*(max-min+1))+min;
      const today = new Date();
      
      function randDateTime(offsetMin=0, offsetMax=2){
        const d = new Date(today);
        d.setDate(d.getDate() + rnd(offsetMin, offsetMax));
        d.setHours(rnd(12,22), [0,15,30,45][rnd(0,3)], 0, 0);
        return d.toISOString().slice(0,16);
      }
      
      const firstNames = ['Daniel','Lucía','Rafael','Andrea','Miguel','Sofía','Carlos','Elena','María','José','Ana','Antonio','Carmen','Francisco','Isabel','Manuel'];
      const lastNames = ['Gómez','López','Martínez','Ibar','Jiménez','Lara','Pérez','Santos','García','Rodríguez','Fernández','González','Ruiz','Díaz','Hernández','Moreno'];
      const nationalities = ['Española','Francesa','Italiana','Alemana','Británica','Portuguesa','Holandesa','Belga','Sueca','Noruega','Danesa','Austriaca'];
      const docTypes = ['DNI','NIE','Pasaporte'];
      const docNumbers = ['12345678A','X1234567L','AB1234567','87654321Z','Y9876543M','CD9876543'];
      const emailDomains = ['gmail.com','hotmail.com','yahoo.es','outlook.com','icloud.com'];
      
      const firstName = firstNames[rnd(0, firstNames.length-1)];
      const lastName = lastNames[rnd(0, lastNames.length-1)];
      const fullName = `${firstName} ${lastName}`;
      const docType = docTypes[rnd(0, docTypes.length-1)];
      const docNumber = docNumbers[rnd(0, docNumbers.length-1)];
      const nationality = nationalities[rnd(0, nationalities.length-1)];
      const emailDomain = emailDomains[rnd(0, emailDomains.length-1)];
      
      // Generar fecha de nacimiento realista
      const birthYear = rnd(1950, 2005);
      const birthMonth = rnd(1, 12);
      const birthDay = rnd(1, 28);
      
      return {
        language: 'Español',
        arrival: randDateTime(0, 1).replace('T', ' ').replace(/-/g, '/'),
        departure: randDateTime(2, 5).replace('T', ' ').replace(/-/g, '/'),
        name: fullName,
        document: `${docType}: ${docNumber}`,
        birth: `${birthDay.toString().padStart(2, '0')}/${birthMonth.toString().padStart(2, '0')}/${birthYear}`,
        nationality: nationality,
        email: `${firstName.toLowerCase()}.${lastName.toLowerCase()}${rnd(1, 99)}@${emailDomain}`
      };
    }

    $('#previewBtn').addEventListener('click', () => {
      // Generar datos aleatorios cada vez
      const data = generatePreviewData();
      
      // Actualizar el modal con los datos
      $('#pv-lang').textContent = data.language;
      $('#pv-arrival').textContent = data.arrival;
      $('#pv-departure').textContent = data.departure;
      $('#pv-name').textContent = data.name;
      $('#pv-doc').textContent = data.document;
      $('#pv-birth').textContent = data.birth;
      $('#pv-nation').textContent = data.nationality;
      $('#pv-email').textContent = data.email;
      
      // Mostrar el modal
      openModal();
    });


    // Generar y descargar CSV con datos de reservas
    function generateReservationsCSV(){
      const firstNames = ['Daniel','Lucía','Rafael','Andrea','Miguel','Sofía','Carlos','Elena','María','José','Ana','Luis'];
      const lastNames  = ['Gómez','López','Martínez','Ibar','Jiménez','Lara','Pérez','Santos','García','Rodríguez','Fernández','González'];
      const channels = ['Booking','Airbnb','Expedia','Vrbo','Manual'];
      const states = ['Confirmada','Pendiente','Cancelada'];
      const categories = ['Individual','Doble','Triple','Suite'];
      
      const rnd = (min,max) => Math.floor(Math.random()*(max-min+1))+min;
      const pad2 = n => String(n).padStart(2,'0');
      const today = new Date();
      
      function randDate(offsetMin=0, offsetMax=30){
        const d = new Date(today);
        d.setDate(d.getDate() + rnd(offsetMin, offsetMax));
        return `${d.getDate()}/${d.getMonth()+1}/${d.getFullYear()}`;
      }
      
      function randDateTime(offsetMin=0, offsetMax=30){
        const d = new Date(today);
        d.setDate(d.getDate() + rnd(offsetMin, offsetMax));
        d.setHours(rnd(12,22), [0,15,30,45][rnd(0,3)], 0, 0);
        return d.toISOString().slice(0,16).replace('T',' ').replace(/-/g,'/');
      }
      
      const currency = v => v.toLocaleString('es-ES', { style:'currency', currency:'EUR' });
      
      // Generar 15-25 reservas aleatorias
      const numReservations = rnd(15, 25);
      const reservations = Array.from({length: numReservations}).map((_,i) => {
        const roomNum = rnd(1, 20);
        const category = categories[rnd(0, categories.length-1)];
        const guest = `${firstNames[rnd(0, firstNames.length-1)]} ${lastNames[rnd(0, lastNames.length-1)]}`;
        const arrival = randDateTime(0, 30);
        const departure = randDateTime(31, 60);
        const state = states[rnd(0, states.length-1)];
        const channel = channels[rnd(0, channels.length-1)];
        const paid = state === 'Cancelada' ? 0 : rnd(40, 200);
        const commission = paid > 0 ? +(paid * (channel === 'Manual' ? 0 : 0.15)).toFixed(2) : 0;
        const netGain = +(paid - commission).toFixed(2);
        const phone = `+34 6${rnd(10,99)} ${pad2(rnd(10,99))} ${pad2(rnd(10,99))}`;
        const email = `${guest.split(' ')[0].toLowerCase()}${rnd(1,99)}@mail.com`;
        
        return {
          habitacion: `Habitación ${roomNum} · ${category}`,
          huesped: guest,
          llegada: arrival,
          salida: departure,
          estado: state,
          pagoHuesped: currency(paid),
          comision: currency(commission),
          gananciaNeta: currency(netGain),
          canal: channel,
          telefono: phone,
          email: email
        };
      });
      
      // Crear CSV
      const headers = ['Habitación','Huésped','Llegada','Salida','Estado','Pagó Huésped','Comisión','Ganancia Neta','Canal','Teléfono','Email'];
      const csvContent = [
        headers.join(','),
        ...reservations.map(r => [
          `"${r.habitacion}"`,
          `"${r.huesped}"`,
          `"${r.llegada}"`,
          `"${r.salida}"`,
          `"${r.estado}"`,
          `"${r.pagoHuesped}"`,
          `"${r.comision}"`,
          `"${r.gananciaNeta}"`,
          `"${r.canal}"`,
          `"${r.telefono}"`,
          `"${r.email}"`
        ].join(','))
      ].join('\n');
      
      // Descargar archivo
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      const url = URL.createObjectURL(blob);
      link.setAttribute('href', url);
      link.setAttribute('download', `reservas_delfin_checkin_${new Date().toISOString().slice(0,10)}.csv`);
      link.style.visibility = 'hidden';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
    
    // Event listener para el botón de descarga con loading
    $('#downloadCsvBtn').addEventListener('click', (e) => {
      e.preventDefault();
      const btn = e.target;
      const originalText = btn.textContent;
      btn.innerHTML = '<span class="loading"></span> Generando CSV...';
      btn.disabled = true;
      
      setTimeout(() => {
        generateReservationsCSV();
        btn.textContent = originalText;
        btn.disabled = false;
      }, 1500);
    });

    // Datos aleatorios de KPIs (demo)
    (function fillKpis(){
      const rnd = (min,max) => Math.floor(Math.random()*(max-min+1))+min;
      const money = v => v.toLocaleString('es-ES', { style:'currency', currency:'EUR' });
      const rooms = rnd(4, 18);
      const guests= rnd(1, 12);
      const active= rnd(6, 26);
      const occ   = rnd(5, 98);
      const revenue = rnd(800, 4000) + Math.random();
      const fees    = revenue * 0.12;
      const profit  = revenue - fees;

      const set = (id, val) => { const el = document.getElementById(id); if (el) el.textContent = val; };
      set('kpi-rooms', String(rooms));
      set('kpi-guests', String(guests));
      set('kpi-active', String(active));
      set('kpi-occ', `${occ}%`);
      set('kpi-revenue', money(revenue));
      set('kpi-fees', money(fees));
      set('kpi-profit', money(profit));
    })();

    // Calculadora de precios por volumen
    function updateCalculator() {
      const properties = parseInt($('#calcProperties').value) || 1;
      const plan = $('#calcPlan').value;
      
      let pricePerProperty, total, savings, perPropertyText, savingsText, discount;
      
      // Calcular precio por propiedad según volumen
      if (properties === 1) {
        pricePerProperty = 14.99;
        discount = 0;
      } else if (properties === 2) {
        pricePerProperty = 13.49;
        discount = 10;
      } else if (properties >= 3 && properties <= 4) {
        pricePerProperty = 12.74;
        discount = 15;
      } else if (properties >= 5 && properties <= 9) {
        pricePerProperty = 11.99;
        discount = 20;
      } else if (properties >= 10) {
        pricePerProperty = 11.24;
        discount = 25;
      } else {
        // Fallback para números intermedios
        if (properties < 3) {
          pricePerProperty = 13.49;
          discount = 10;
        } else if (properties < 5) {
          pricePerProperty = 12.74;
          discount = 15;
        } else if (properties < 10) {
          pricePerProperty = 11.99;
          discount = 20;
        } else {
          pricePerProperty = 11.24;
          discount = 25;
        }
      }
      
      // Calcular totales
      const monthlyTotal = properties * pricePerProperty;
      const yearlyTotal = monthlyTotal * 12;
      const yearlyDiscount = yearlyTotal * 0.167; // 16.7% descuento anual
      const finalYearlyTotal = yearlyTotal - yearlyDiscount;
      
      // Calcular ahorros
      const regularMonthlyPrice = properties * 14.99;
      const regularYearlyPrice = regularMonthlyPrice * 12;
      const volumeSavings = regularYearlyPrice - yearlyTotal;
      const totalSavings = volumeSavings + yearlyDiscount;
      
      if (plan === 'monthly') {
        total = monthlyTotal;
        perPropertyText = `${pricePerProperty.toFixed(2)}€ por propiedad`;
        if (discount > 0) {
          savingsText = `${discount}% descuento por volumen`;
        } else {
          savingsText = 'Precio base';
        }
      } else if (plan === 'yearly') {
        total = finalYearlyTotal;
        perPropertyText = `${pricePerProperty.toFixed(2)}€ por propiedad`;
        savingsText = `Ahorras ${totalSavings.toFixed(2)}€ al año`;
      }
      
      const periodText = plan === 'yearly' ? '/año' : '/mes';
        
      $('#calcTotal').textContent = `${total.toFixed(2)}€${periodText}`;
      $('#calcPerProperty').textContent = perPropertyText;
      $('#calcSavings').textContent = savingsText;
      
      // Cambiar color según ahorro
      if (totalSavings > 0 || discount > 0) {
        $('#calcSavings').style.color = '#16a34a';
        $('#calcSavings').style.background = 'rgba(22, 163, 74, 0.1)';
      } else {
        $('#calcSavings').style.color = '#64748b';
        $('#calcSavings').style.background = 'rgba(100, 116, 139, 0.1)';
      }
    }
    
    function openCalculator() {
      const properties = $('#calcProperties').value;
      const plan = $('#calcPlan').value;
      
      let planText, subject, body;
      planText = plan === 'monthly' ? 'mensual' : plan === 'yearly' ? 'anual' : 'volumen';
      subject = `Consulta plan ${planText} - Delfín Check-in`;
      body = `Hola,%0D%0A%0D%0AMe interesa el plan ${planText} de Delfín Check-in para ${properties} ${properties == 1 ? 'propiedad' : 'propiedades'}.%0D%0A%0D%0A¿Podrían darme más información sobre:%0D%0A- Precios y planes disponibles%0D%0A- Funcionalidades incluidas%0D%0A- Proceso de implementación%0D%0A%0D%0AGracias.`;
      
      const mailto = `mailto:contacto@delfincheckin.com?subject=${encodeURIComponent(subject)}&body=${body}`;
      window.location.href = mailto;
    }

    // Variables para el mantenimiento de pulsación
    let incrementInterval = null;
    let decrementInterval = null;
    let isIncrementing = false;
    let isDecrementing = false;

    // Funciones para los botones de incremento/decremento
    function incrementProperties() {
      const input = $('#calcProperties');
      const currentValue = parseInt(input.value) || 1;
      const maxValue = parseInt(input.getAttribute('max')) || 50;
      
      if (currentValue < maxValue) {
        input.value = currentValue + 1;
        updateCalculator();
        
        // Efecto visual de pulsación
        input.style.transform = 'scale(0.98)';
        setTimeout(() => {
          input.style.transform = 'scale(1)';
        }, 100);
      }
    }
    
    // Función para click simple (solo un incremento)
    function singleIncrement() {
      incrementProperties();
    }

    function decrementProperties() {
      const input = $('#calcProperties');
      const currentValue = parseInt(input.value) || 1;
      const minValue = parseInt(input.getAttribute('min')) || 1;
      
      if (currentValue > minValue) {
        input.value = currentValue - 1;
        updateCalculator();
        
        // Efecto visual de pulsación
        input.style.transform = 'scale(0.98)';
        setTimeout(() => {
          input.style.transform = 'scale(1)';
        }, 100);
      }
    }
    
    // Función para click simple (solo un decremento)
    function singleDecrement() {
      decrementProperties();
    }

    // Variables para crecimiento exponencial
    let incrementSpeed = 500; // Velocidad inicial
    let incrementCount = 0; // Contador de incrementos
    
    // Funciones para mantener pulsado
    function startIncrement() {
      if (isIncrementing) return;
      isIncrementing = true;
      incrementCount = 0;
      incrementSpeed = 300; // Resetear velocidad
      
      // Efecto visual en el botón
      const btn = $('#incrementBtn');
      btn.style.background = '#1d4ed8';
      btn.style.transform = 'scale(0.95)';
      
      // NO hacer incremento inmediato, solo empezar el timer
      
      // Función recursiva con crecimiento exponencial
      function doIncrement() {
        if (!isIncrementing) return;
        
        const input = $('#calcProperties');
        const currentValue = parseInt(input.value) || 1;
        const maxValue = parseInt(input.getAttribute('max')) || 50;
        
        if (currentValue < maxValue) {
          incrementProperties();
          incrementCount++;
          
          // Reducir velocidad exponencialmente (mínimo 20ms)
          // Empieza lento y acelera gradualmente
          incrementSpeed = Math.max(20, 500 - (incrementCount * 30));
          
          // Programar siguiente incremento
          incrementInterval = setTimeout(doIncrement, incrementSpeed);
        } else {
          stopIncrement();
        }
      }
      
      // Empezar la secuencia con delay inicial más corto
      incrementInterval = setTimeout(doIncrement, 300);
    }

    function stopIncrement() {
      isIncrementing = false;
      if (incrementInterval) {
        clearTimeout(incrementInterval);
        incrementInterval = null;
      }
      
      // Restaurar efecto visual del botón
      const btn = $('#incrementBtn');
      btn.style.background = '#2563eb';
      btn.style.transform = 'scale(1)';
    }

    // Variables para decremento exponencial
    let decrementSpeed = 500; // Velocidad inicial
    let decrementCount = 0; // Contador de decrementos
    
    function startDecrement() {
      if (isDecrementing) return;
      isDecrementing = true;
      decrementCount = 0;
      decrementSpeed = 300; // Resetear velocidad
      
      // Efecto visual en el botón
      const btn = $('#decrementBtn');
      btn.style.background = '#1d4ed8';
      btn.style.transform = 'scale(0.95)';
      
      // NO hacer decremento inmediato, solo empezar el timer
      
      // Función recursiva con crecimiento exponencial
      function doDecrement() {
        if (!isDecrementing) return;
        
        const input = $('#calcProperties');
        const currentValue = parseInt(input.value) || 1;
        const minValue = parseInt(input.getAttribute('min')) || 1;
        
        if (currentValue > minValue) {
          decrementProperties();
          decrementCount++;
          
          // Reducir velocidad exponencialmente (mínimo 20ms)
          // Empieza lento y acelera gradualmente
          decrementSpeed = Math.max(20, 500 - (decrementCount * 30));
          
          // Programar siguiente decremento
          decrementInterval = setTimeout(doDecrement, decrementSpeed);
        } else {
          stopDecrement();
        }
      }
      
      // Empezar la secuencia con delay inicial más corto
      decrementInterval = setTimeout(doDecrement, 300);
    }

    function stopDecrement() {
      isDecrementing = false;
      if (decrementInterval) {
        clearTimeout(decrementInterval);
        decrementInterval = null;
      }
      
      // Restaurar efecto visual del botón
      const btn = $('#decrementBtn');
      btn.style.background = '#2563eb';
      btn.style.transform = 'scale(1)';
    }
    
    // Event listeners para la calculadora
    $('#calcPlan').addEventListener('change', updateCalculator);
    
    // Soporte para teclas de flecha en el input de propiedades (aunque sea readonly)
    $('#calcProperties').addEventListener('keydown', function(e) {
      if (e.key === 'ArrowUp') {
        e.preventDefault();
        if (!isIncrementing) {
          startIncrement();
        }
      } else if (e.key === 'ArrowDown') {
        e.preventDefault();
        if (!isDecrementing) {
          startDecrement();
        }
      }
    });

    // Detener cuando se suelta la tecla
    $('#calcProperties').addEventListener('keyup', function(e) {
      if (e.key === 'ArrowUp') {
        stopIncrement();
      } else if (e.key === 'ArrowDown') {
        stopDecrement();
      }
    });

    // Detener todos los intervalos cuando se pierde el foco
    $('#calcProperties').addEventListener('blur', function() {
      stopIncrement();
      stopDecrement();
    });
    
    // ===== SOPORTE PARA MÓVILES (TOUCH EVENTS) =====
    
    // Función para detectar si es un dispositivo táctil
    function isTouchDevice() {
      return 'ontouchstart' in window || 
             navigator.maxTouchPoints > 0 || 
             window.matchMedia('(pointer: coarse)').matches;
    }
    
    // Event listeners para touch en móviles
    if (isTouchDevice()) {
      // Función para añadir feedback visual táctil
      function addTouchFeedback(button) {
        button.style.transform = 'scale(0.9)';
        button.style.background = '#1d4ed8';
        button.style.boxShadow = '0 0 0 3px rgba(37, 99, 235, 0.3)';
      }
      
      function removeTouchFeedback(button) {
        button.style.transform = 'scale(1)';
        button.style.background = '#2563eb';
        button.style.boxShadow = 'none';
      }
      
      // Botón de incremento - SOLO click simple
      $('#incrementBtn').addEventListener('touchstart', function(e) {
        e.preventDefault();
        addTouchFeedback(this);
      });
      
      $('#incrementBtn').addEventListener('touchend', function(e) {
        e.preventDefault();
        removeTouchFeedback(this);
        singleIncrement(); // Solo un incremento
      });
      
      $('#incrementBtn').addEventListener('touchcancel', function(e) {
        e.preventDefault();
        removeTouchFeedback(this);
      });
      
      // Botón de decremento - SOLO click simple
      $('#decrementBtn').addEventListener('touchstart', function(e) {
        e.preventDefault();
        addTouchFeedback(this);
      });
      
      $('#decrementBtn').addEventListener('touchend', function(e) {
        e.preventDefault();
        removeTouchFeedback(this);
        singleDecrement(); // Solo un decremento
      });
      
      $('#decrementBtn').addEventListener('touchcancel', function(e) {
        e.preventDefault();
        removeTouchFeedback(this);
      });
      
      // Prevenir zoom en doble tap
      let lastTouchEnd = 0;
      document.addEventListener('touchend', function(e) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
          e.preventDefault();
        }
        lastTouchEnd = now;
      }, false);
      
      // Prevenir scroll cuando se toca la calculadora
      const calculatorContainer = document.querySelector('.calculator-grid');
      if (calculatorContainer) {
        calculatorContainer.addEventListener('touchstart', function(e) {
          e.stopPropagation();
        });
      }
    }
    
    // Inicializar calculadora
    updateCalculator();


    // Función para manejar el botón "Email directo" en Opera GX
    function handleEmailDirecto(event) {
      const isOperaGX = navigator.userAgent.includes('OPR') || navigator.userAgent.includes('Opera');
      
      if (isOperaGX) {
        event.preventDefault();
        const mailtoUrl = 'mailto:contacto@delfincheckin.com?subject=Consulta%20Delfin%20Check-in';
        const newWindow = window.open(mailtoUrl, '_blank');
        
        if (!newWindow) {
          // Si se bloquea, mostrar modal alternativo
          const modal = document.createElement('div');
          modal.style.cssText = `
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
            align-items: center; justify-content: center; font-family: Arial, sans-serif;
          `;
          
          modal.innerHTML = `
            <div style="background: white; padding: 30px; border-radius: 15px; max-width: 400px; width: 90%; text-align: center;">
              <h3 style="color: #2563eb; margin-bottom: 20px;">📧 Tu navegador bloquea el envío automático</h3>
              <p style="margin-bottom: 15px;">Copia este email y envíalo manualmente:</p>
              <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin: 15px 0; border: 2px solid #e2e8f0;">
                <strong style="color: #2563eb; font-size: 18px;">contacto@delfincheckin.com</strong>
              </div>
              <p style="margin-bottom: 15px;">Asunto: <strong>Consulta Delfin Check-in</strong></p>
              <div style="margin-top: 20px;">
                <button onclick="this.parentElement.parentElement.parentElement.remove();" style="background: #2563eb; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                  ✅ Entendido, he copiado el email
                </button>
              </div>
            </div>
          `;
          
          document.body.appendChild(modal);
        }
      }
    }
    
    // Hacer la función global
    window.handleEmailDirecto = handleEmailDirecto;

    // Formulario de Contacto
    $('#sendContact').addEventListener('click', (e) => {
      e.preventDefault();
      
      const name = $('#contactName').value.trim();
      const email = $('#contactEmail').value.trim();
      const phone = $('#contactPhone').value.trim();
      const business = $('#contactBusiness').value.trim();
      const message = $('#contactMessage').value.trim();
      
      // Validar campos obligatorios
      if (!name || !email || !message) {
        alert('Por favor, completa los campos obligatorios (Nombre, Email y Mensaje).');
        return;
      }
      
      // Validar formato de email
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Por favor, introduce un email válido.');
        return;
      }
      
      // Crear mensaje para email
      const subject = `Nueva consulta desde la web - ${name}`;
      const emailBody = `Nueva consulta desde la web:

Nombre: ${name}
Email: ${email}
Teléfono: ${phone || 'No proporcionado'}
Empresa: ${business || 'No proporcionada'}

Mensaje:
${message}`;
      
      // Crear enlace mailto
      const mailtoUrl = `mailto:contacto@delfincheckin.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
      
      // Detectar si es Opera GX u otro navegador que puede bloquear mailto
      const isOperaGX = navigator.userAgent.includes('OPR') || navigator.userAgent.includes('Opera');
      
      // Abrir cliente de email
      try {
        // Para Opera GX, usar window.open en lugar de window.location.href
        if (isOperaGX) {
          const newWindow = window.open(mailtoUrl, '_blank');
          if (!newWindow) {
            // Si se bloquea, mostrar alternativa
            showEmailAlternative(subject, emailBody);
            return;
          }
        } else {
          window.location.href = mailtoUrl;
        }
        
        // Mostrar confirmación después de un breve delay
        setTimeout(() => {
          alert('¡Redirigiendo a tu cliente de email! Completa el envío desde allí.');
        }, 100);
        
        // Limpiar formulario
        $('#contactForm').reset();
      } catch (error) {
        console.error('Error al abrir cliente de email:', error);
        showEmailAlternative(subject, emailBody);
      }
      
      // Función para mostrar alternativa cuando mailto falla
      function showEmailAlternative(subject, body) {
        const emailText = `contacto@delfincheckin.com`;
        const fullMessage = `Asunto: ${subject}\n\nMensaje:\n${body}`;
        
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
          background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
          align-items: center; justify-content: center; font-family: Arial, sans-serif;
        `;
        
        modal.innerHTML = `
          <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; text-align: center;">
            <h3 style="color: #2563eb; margin-bottom: 20px;">📧 Tu navegador bloquea el envío automático</h3>
            <p style="margin-bottom: 15px;">Copia este email y envíalo manualmente:</p>
            <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin: 15px 0; border: 2px solid #e2e8f0;">
              <strong style="color: #2563eb; font-size: 18px;">${emailText}</strong>
            </div>
            <p style="margin-bottom: 15px;">Y copia este mensaje:</p>
            <textarea readonly style="width: 100%; height: 200px; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; font-family: monospace; font-size: 12px; resize: vertical;">${fullMessage}</textarea>
            <div style="margin-top: 20px;">
              <button onclick="this.parentElement.parentElement.parentElement.remove(); $('#contactForm').reset();" style="background: #2563eb; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                ✅ Entendido, he copiado la información
              </button>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
      }
    });

    // Cookies Banner - RGPD Compliant
    (function initCookies(){
      const banner = $('#cookiesBanner');
      const acceptBtn = $('#cookiesAccept');
      const rejectBtn = $('#cookiesReject');
      const customizeBtn = $('#cookiesCustomize');
      
      // Mostrar banner si no hay consentimiento previo
      if (!localStorage.getItem('cookiesConsent')) {
        setTimeout(() => banner.classList.add('show'), 1000);
      }
      
      // Aceptar todas las cookies
      acceptBtn.addEventListener('click', () => {
        const consent = {
          necessary: true,
          analytics: true,
          marketing: true,
          timestamp: new Date().toISOString()
        };
        localStorage.setItem('cookiesConsent', JSON.stringify(consent));
        banner.classList.remove('show');
        console.log('Cookies aceptadas:', consent);
      });
      
      // Solo cookies necesarias
      rejectBtn.addEventListener('click', () => {
        const consent = {
          necessary: true,
          analytics: false,
          marketing: false,
          timestamp: new Date().toISOString()
        };
        localStorage.setItem('cookiesConsent', JSON.stringify(consent));
        banner.classList.remove('show');
        console.log('Solo cookies necesarias:', consent);
      });
      
      // Personalizar cookies (por ahora igual que rechazar)
      customizeBtn.addEventListener('click', () => {
        const consent = {
          necessary: true,
          analytics: false,
          marketing: false,
          timestamp: new Date().toISOString()
        };
        localStorage.setItem('cookiesConsent', JSON.stringify(consent));
        banner.classList.remove('show');
        console.log('Cookies personalizadas:', consent);
      });
    })();

    // Función para verificar consentimiento de cookies
    function hasCookieConsent(type = 'analytics') {
      const consent = localStorage.getItem('cookiesConsent');
      if (!consent) return false;
      
      try {
        const parsed = JSON.parse(consent);
        return parsed[type] === true;
      } catch {
        return false;
      }
    }

    // Botón gestionar cookies
    $('#manageCookies').addEventListener('click', () => {
      const banner = $('#cookiesBanner');
      banner.classList.add('show');
    });

    // ===== NAVEGACIÓN SUAVE =====
    function initSmoothNavigation() {
      // Navegación suave para enlaces internos
      document.querySelectorAll('a[href^="#"]').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const targetId = this.getAttribute('href').substring(1);
          const targetElement = document.getElementById(targetId);
          
          if (targetElement) {
            // Scroll suave con offset para el header
            const headerHeight = 80;
            const targetPosition = targetElement.offsetTop - headerHeight;
            
            window.scrollTo({
              top: targetPosition,
              behavior: 'smooth'
            });
            
            // Añadir efecto visual al elemento de destino
            targetElement.style.transition = 'all 0.3s ease';
            targetElement.style.transform = 'scale(1.02)';
            targetElement.style.boxShadow = '0 0 20px rgba(37, 99, 235, 0.3)';
            
            setTimeout(() => {
              targetElement.style.transform = 'scale(1)';
              targetElement.style.boxShadow = '';
            }, 300);
          }
        });
      });
      
      // Resaltar sección activa en el scroll
      const sections = document.querySelectorAll('section[id]');
      const navLinks = document.querySelectorAll('a[href^="#"]');
      
      window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
          const sectionTop = section.offsetTop - 100;
          if (window.pageYOffset >= sectionTop) {
            current = section.getAttribute('id');
          }
        });
        
        navLinks.forEach(link => {
          link.classList.remove('active');
          if (link.getAttribute('href') === `#${current}`) {
            link.classList.add('active');
          }
        });
      });
    }

    // ===== SISTEMA DE PAGOS STRIPE =====
    let elements, cardElement, clientSecret;
    let currentPlan = 'monthly';

    // Inicializar Stripe Elements
    function initializeStripe() {
      elements = stripe.elements();
      cardElement = elements.create('card', {
        style: {
          base: {
            fontSize: '16px',
            color: '#424770',
            '::placeholder': {
              color: '#aab7c4',
            },
          },
        },
      });
      cardElement.mount('#cardElement');
      
      cardElement.on('change', ({error}) => {
        const displayError = $('#cardErrors');
        if (error) {
          displayError.textContent = error.message;
        } else {
          displayError.textContent = '';
        }
      });
    }

    // Función para iniciar el pago
    function startPayment(plan) {
      currentPlan = plan;
      const modal = $('#paymentModal');
      const planName = $('#planName');
      const planPrice = $('#planPrice');
      const planDescription = $('#planDescription');
      
      // Inicializar con 1 propiedad por defecto
      const properties = 1;
      
      // Configurar información del plan
      let pricePerProperty, total, planText;
      if (plan === 'monthly') {
        planText = 'Plan Mensual';
        pricePerProperty = '4€/mes';
        total = properties * 4;
      } else if (plan === 'yearly') {
        planText = 'Plan Anual';
        pricePerProperty = '40€/año';
        total = properties * 40;
      } else if (plan === 'volume') {
        planText = 'Plan Volumen';
        if (properties >= 5) {
          // Aplicar descuento del 30% para 5+ propiedades
          const discountedPrice = Math.round(40 * 0.7); // 28€ por propiedad
          pricePerProperty = `${discountedPrice}€/año (descuento aplicado)`;
          total = properties * discountedPrice;
        } else {
          pricePerProperty = '40€/año (mínimo 5 propiedades)';
          total = properties * 40;
        }
      }
      
      // Actualizar información en el modal
      planName.textContent = planText;
      planPrice.textContent = pricePerProperty;
      $('#planProperties').textContent = properties + (properties === 1 ? ' propiedad' : ' propiedades');
      $('#totalPrice').textContent = total === 'Contactar' ? 'Contactar para precio' : `${total}€${plan === 'monthly' ? '/mes' : '/año'}`;
      
      // Configurar el campo de propiedades
      $('#paymentProperties').value = properties;
      
      // Event listener para actualizar precio cuando cambie el número de propiedades
      $('#paymentProperties').addEventListener('input', function() {
        const newProperties = parseInt(this.value) || 1;
        let newTotal, newPricePerProperty;
        
        if (plan === 'monthly') {
          newPricePerProperty = '4€/mes';
          newTotal = newProperties * 4;
        } else if (plan === 'yearly') {
          newPricePerProperty = '40€/año';
          newTotal = newProperties * 40;
        } else if (plan === 'volume') {
          if (newProperties >= 5) {
            const discountedPrice = Math.round(40 * 0.7); // 28€ por propiedad
            newPricePerProperty = `${discountedPrice}€/año (descuento aplicado)`;
            newTotal = newProperties * discountedPrice;
          } else {
            newPricePerProperty = '40€/año (mínimo 5 propiedades)';
            newTotal = newProperties * 40;
          }
        }
        
        $('#planProperties').textContent = newProperties + (newProperties === 1 ? ' propiedad' : ' propiedades');
        $('#planPrice').textContent = newPricePerProperty;
        $('#totalPrice').textContent = `${newTotal}€${plan === 'monthly' ? '/mes' : '/año'}`;
      });
      
      
      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      
      // Inicializar Stripe si no está inicializado
      if (!elements) {
        initializeStripe();
      }
    }

    // Cerrar modal de pago
    function closePaymentModal() {
      const modal = $('#paymentModal');
      modal.style.display = 'none';
      document.body.style.overflow = '';
    }

    // Event listeners para el modal de pago
    $('#closePayment').addEventListener('click', closePaymentModal);
    $('#paymentModal').addEventListener('click', (e) => {
      if (e.target === $('#paymentModal')) {
        closePaymentModal();
      }
    });

    // Manejar envío del formulario de pago
    $('#paymentForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const submitButton = $('#submitPayment');
      const buttonText = $('#buttonText');
      const spinner = $('#spinner');
      const properties = parseInt($('#paymentProperties').value) || 1;
      const email = $('#paymentEmail').value;
      const name = $('#paymentName').value;
      
      if (!email || !name) {
        alert('Por favor, completa todos los campos obligatorios.');
        return;
      }
      
      // Mostrar spinner
      buttonText.style.display = 'none';
      spinner.style.display = 'inline';
      submitButton.disabled = true;
      
      try {
        // Crear Payment Intent en el backend (simulado)
        const response = await fetch('https://admin.delfincheckin.com/api/create-payment-intent', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            plan: currentPlan,
            properties: properties,
            email: email,
            name: name
          })
        });
        
        if (!response.ok) {
          throw new Error('Error al crear el pago');
        }
        
        const {client_secret} = await response.json();
        
        // Confirmar el pago
        const {error, paymentIntent} = await stripe.confirmCardPayment(client_secret, {
          payment_method: {
            card: cardElement,
            billing_details: {
              name: name,
              email: email,
            },
          }
        });
        
        if (error) {
          $('#cardErrors').textContent = error.message;
        } else if (paymentIntent.status === 'succeeded') {
          // Pago exitoso
          alert('¡Pago procesado correctamente! Te hemos enviado un email de confirmación.');
          closePaymentModal();
          
          // Redirigir a dashboard o página de éxito
          window.location.href = '/dashboard?payment=success';
        }
        
      } catch (error) {
        console.error('Error:', error);
        alert('Error al procesar el pago. Por favor, inténtalo de nuevo.');
      } finally {
        // Ocultar spinner
        buttonText.style.display = 'inline';
        spinner.style.display = 'none';
        submitButton.disabled = false;
      }
    });

    // Actualizar precio cuando cambie el número de propiedades
    $('#paymentProperties').addEventListener('input', () => {
      const properties = parseInt($('#paymentProperties').value) || 1;
      const planPrice = $('#planPrice');
      
      if (currentPlan === 'monthly') {
        planPrice.textContent = `${properties * 4}€ total (${properties} propiedades × 4€)`;
      } else if (currentPlan === 'yearly') {
        planPrice.textContent = `${properties * 40}€ total (${properties} propiedades × 40€)`;
      }
    });

    // Inicializar navegación suave cuando el DOM esté listo
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initSmoothNavigation);
    } else {
      initSmoothNavigation();
    }

    // ===== FUNCIÓN PARA BOTONES DE VENTAS =====
    function initSalesButtons() {
      // Función para abrir modal de contacto de ventas
      function openSalesContact(plan = '') {
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed; inset: 0; display: flex; align-items: center; justify-content: center;
          background: rgba(15,23,42,.6); z-index: 1000; backdrop-filter: blur(4px);
        `;
        
        modal.innerHTML = `
          <div style="width: min(500px, 95vw); background: white; border-radius: 16px; box-shadow: 0 25px 80px rgba(0,0,0,.4); overflow: hidden; animation: slideIn 0.3s ease-out;">
            <div style="background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); color: white; padding: 20px 24px; display: flex; align-items: center; justify-content: space-between;">
              <div style="display: flex; align-items: center; gap: 12px;">
                <div style="font-size: 24px;">💬</div>
                <div>
                  <h3 style="margin: 0; font-size: 20px; font-weight: 700;">Hablar con Ventas</h3>
                  <p style="margin: 4px 0 0; font-size: 14px; opacity: 0.9;">Te ayudamos a elegir el mejor plan</p>
                </div>
              </div>
              <button onclick="this.closest('.sales-modal').remove()" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); height: 40px; width: 40px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold;">×</button>
            </div>
            <div style="padding: 24px;">
              <div style="margin-bottom: 20px;">
                <h4 style="margin: 0 0 12px; color: #1e40af; font-size: 16px;">Contacta con nosotros</h4>
                <p style="margin: 0; color: #64748b; font-size: 14px;">Te responderemos por email en menos de 24 horas.</p>
              </div>
              
              <div style="display: flex; justify-content: center; margin-bottom: 20px;">
                <button onclick="openEmailSales('${plan}')" style="background: #2563eb; color: white; border: none; padding: 16px 32px; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 12px; transition: all 0.2s ease;" onmouseover="this.style.background='#1d4ed8'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='#2563eb'; this.style.transform='translateY(0)'">
                  <div style="font-size: 20px;">📧</div>
                  <div>
                    <div style="font-weight: 600;">Contactar por Email</div>
                    <div style="font-size: 12px; opacity: 0.9;">Respuesta en 24h</div>
                  </div>
                </button>
              </div>
              
              <div style="background: #f8fafc; border-radius: 8px; padding: 16px; text-align: center;">
                <div style="color: #64748b; font-size: 14px;">
                  <strong>💡 Consejo:</strong> Te responderemos por email en menos de 24 horas
                </div>
              </div>
            </div>
          </div>
        `;
        
        modal.className = 'sales-modal';
        document.body.appendChild(modal);
        document.body.style.overflow = 'hidden';
      }


      // Función para abrir email de ventas
      function openEmailSales(plan) {
        const planText = plan ? ` - ${plan}` : '';
        const subject = `Consulta Delfín Check-in${planText}`;
        const body = `Hola,%0D%0A%0D%0AMe interesa conocer más sobre Delfín Check-in${planText}.%0D%0A%0D%0A¿Podrían enviarme información sobre:%0D%0A- Precios y planes disponibles%0D%0A- Funcionalidades incluidas%0D%0A- Proceso de implementación%0D%0A%0D%0AGracias.`;
        const mailto = `mailto:contacto@delfincheckin.com?subject=${encodeURIComponent(subject)}&body=${body}`;
        window.location.href = mailto;
        document.querySelector('.sales-modal')?.remove();
        document.body.style.overflow = '';
      }

      // Hacer las funciones globales
      window.openSalesContact = openSalesContact;
      window.openEmailSales = openEmailSales;

      // Reemplazar enlaces de ventas con la nueva función
      document.querySelectorAll('a[href*="contacto@delfincheckin.com"]').forEach(link => {
        const href = link.getAttribute('href');
        const plan = href.includes('mensual') ? 'Plan Mensual' : 
                    href.includes('anual') ? 'Plan Anual' : 
                    href.includes('volumen') ? 'Descuento Volumen' : '';
        
        link.href = '#';
        link.onclick = (e) => {
          e.preventDefault();
          openSalesContact(plan);
        };
      });
    }

    // Inicializar botones de ventas
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initSalesButtons);
    } else {
      initSalesButtons();
    }

    // Generar tabla de gestión de reservas con datos aleatorios
    (function fillReservations(){
      const tbody = document.getElementById('res-tbody');
      if (!tbody) return;
      const firstNames = ['Daniel','Lucía','Rafael','Andrea','Miguel','Sofía','Carlos','Elena'];
      const lastNames  = ['Gómez','López','Martínez','Ibar','Jiménez','Lara','Pérez','Santos'];
      const channels = ['Manual','Booking','Airbnb','Expedia','Vrbo'];
      const states = [
        {label:'Confirmada', color:'#c7f9cc'},
        {label:'Pendiente', color:'#ffeaa7'}
      ];
      const currency = v => v.toLocaleString('es-ES', { style:'currency', currency:'EUR' });
      const rnd = (min,max) => Math.floor(Math.random()*(max-min+1))+min;
      const pad2 = n => String(n).padStart(2,'0');
      const today = new Date();

      function randDate(offsetMin=0, offsetMax=2){
        const d = new Date(today);
        d.setDate(d.getDate() + rnd(offsetMin, offsetMax));
        return `${d.getDate()}/${d.getMonth()+1}/${d.getFullYear()}`;
      }
      function randHour(){ return `${pad2(rnd(12,22))}:${pad2([0,15,30,45][rnd(0,3)])}`; }
      function randPhone(){ return `+34 6${rnd(10,99)} ${pad2(rnd(10,99))} ${pad2(rnd(10,99))}`; }

      const rows = Array.from({length:8}).map((_,i) => {
        const roomNum = rnd(1,12);
        const category = ['Individual','Doble','Triple'][rnd(0,2)];
        const guest = `${firstNames[rnd(0,firstNames.length-1)]} ${lastNames[rnd(0,lastNames.length-1)]}`;
        const arrival = `${randDate(0,1)} ${randHour()}`;
        const departure = `${randDate(2,5)}`;
        const state = states[rnd(0,states.length-1)];
        const paid  = Math.random()<0.5 ? 0 : rnd(50,120);
        const commission = paid>0 ? +(paid*0.15).toFixed(2) : 0;
        const gain = +(paid - commission).toFixed(2);
        const channel = channels[rnd(0,channels.length-1)];
        const phone = randPhone();
        const email = `${guest.split(' ')[0].toLowerCase()}${rnd(1,99)}@mail.com`;

        return `
          <tr>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border)">Habitación ${roomNum} · ${category}</td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border)">${guest}</td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border)">${arrival}</td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border)">${departure}</td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border)"><span class="badge" style="background:${state.color}">${state.label}</span></td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border)">${currency(paid)}</td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border); color:#ef4444">${currency(commission)}</td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border); color:#16a34a">${currency(gain)}</td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border)"><span class="badge" style="background:#f1f5f9">${channel}</span></td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border)">${phone}</td>
            <td style="padding:10px 8px; border-bottom:1px solid var(--border)">${email}</td>
          </tr>`;
      }).join('');
      tbody.innerHTML = rows;
    })();
    
    // Cache busting - Última actualización: ${new Date().toISOString()}
    console.log('Delfín Check-in cargado correctamente - Versión:', new Date().toISOString());
  </script>
</body>
</html>


